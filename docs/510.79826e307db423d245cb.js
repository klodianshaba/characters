(self.webpackChunkcharacters=self.webpackChunkcharacters||[]).push([[510],{9790:(ot,K,f)=>{"use strict";f.d(K,{Zw:()=>H,aw:()=>ht,X$:()=>G});var e=f(7716),D=f(5917),E=f(5639),a=f(5758),j=f(8071),z=f(1439),q=f(5257),P=f(2066),$=f(8002),W=f(4612),A=f(3190);class H{}let X=(()=>{class T extends H{getTranslation(r){return(0,D.of)({})}}return T.\u0275fac=function(){let S;return function(u){return(S||(S=e.n5z(T)))(u||T)}}(),T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac}),T})();class Q{}let I=(()=>{class T{handle(r){return r.key}}return T.\u0275fac=function(r){return new(r||T)},T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac}),T})();function B(T,S){if(T===S)return!0;if(null===T||null===S)return!1;if(T!=T&&S!=S)return!0;let b,x,M,r=typeof T;if(r==typeof S&&"object"==r){if(!Array.isArray(T)){if(Array.isArray(S))return!1;for(x in M=Object.create(null),T){if(!B(T[x],S[x]))return!1;M[x]=!0}for(x in S)if(!(x in M)&&void 0!==S[x])return!1;return!0}if(!Array.isArray(S))return!1;if((b=T.length)==S.length){for(x=0;x<b;x++)if(!B(T[x],S[x]))return!1;return!0}}return!1}function J(T){return null!=T}function t(T){return T&&"object"==typeof T&&!Array.isArray(T)}function i(T,S){let r=Object.assign({},T);return t(T)&&t(S)&&Object.keys(S).forEach(u=>{t(S[u])?u in T?r[u]=i(T[u],S[u]):Object.assign(r,{[u]:S[u]}):Object.assign(r,{[u]:S[u]})}),r}class n{}let o=(()=>{class T extends n{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(r,u){let b;return b="string"==typeof r?this.interpolateString(r,u):"function"==typeof r?this.interpolateFunction(r,u):r,b}getValue(r,u){let b="string"==typeof u?u.split("."):[u];u="";do{u+=b.shift(),!J(r)||!J(r[u])||"object"!=typeof r[u]&&b.length?b.length?u+=".":r=void 0:(r=r[u],u="")}while(b.length);return r}interpolateFunction(r,u){return r(u)}interpolateString(r,u){return u?r.replace(this.templateMatcher,(b,x)=>{let M=this.getValue(u,x);return J(M)?M:b}):r}}return T.\u0275fac=function(){let S;return function(u){return(S||(S=e.n5z(T)))(u||T)}}(),T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac}),T})();class c{}let h=(()=>{class T extends c{compile(r,u){return r}compileTranslations(r,u){return r}}return T.\u0275fac=function(){let S;return function(u){return(S||(S=e.n5z(T)))(u||T)}}(),T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac}),T})();class p{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new e.vpe,this.onLangChange=new e.vpe,this.onDefaultLangChange=new e.vpe}}const m=new e.OlP("USE_STORE"),C=new e.OlP("USE_DEFAULT_LANG"),g=new e.OlP("DEFAULT_LANGUAGE"),y=new e.OlP("USE_EXTEND");let Y=(()=>{class T{constructor(r,u,b,x,M,tt=!0,et=!1,st=!1,rt){this.store=r,this.currentLoader=u,this.compiler=b,this.parser=x,this.missingTranslationHandler=M,this.useDefaultLang=tt,this.isolate=et,this.extend=st,this.pending=!1,this._onTranslationChange=new e.vpe,this._onLangChange=new e.vpe,this._onDefaultLangChange=new e.vpe,this._langs=[],this._translations={},this._translationRequests={},rt&&this.setDefaultLang(rt)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(r){this.isolate?this._defaultLang=r:this.store.defaultLang=r}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(r){this.isolate?this._currentLang=r:this.store.currentLang=r}get langs(){return this.isolate?this._langs:this.store.langs}set langs(r){this.isolate?this._langs=r:this.store.langs=r}get translations(){return this.isolate?this._translations:this.store.translations}set translations(r){this.isolate?this._translations=r:this.store.translations=r}setDefaultLang(r){if(r===this.defaultLang)return;let u=this.retrieveTranslations(r);void 0!==u?(null==this.defaultLang&&(this.defaultLang=r),u.pipe((0,q.q)(1)).subscribe(b=>{this.changeDefaultLang(r)})):this.changeDefaultLang(r)}getDefaultLang(){return this.defaultLang}use(r){if(r===this.currentLang)return(0,D.of)(this.translations[r]);let u=this.retrieveTranslations(r);return void 0!==u?(this.currentLang||(this.currentLang=r),u.pipe((0,q.q)(1)).subscribe(b=>{this.changeLang(r)}),u):(this.changeLang(r),(0,D.of)(this.translations[r]))}retrieveTranslations(r){let u;return(void 0===this.translations[r]||this.extend)&&(this._translationRequests[r]=this._translationRequests[r]||this.getTranslation(r),u=this._translationRequests[r]),u}getTranslation(r){this.pending=!0;const u=this.currentLoader.getTranslation(r).pipe((0,P.d)(1),(0,q.q)(1));return this.loadingTranslations=u.pipe((0,$.U)(b=>this.compiler.compileTranslations(b,r)),(0,P.d)(1),(0,q.q)(1)),this.loadingTranslations.subscribe({next:b=>{this.translations[r]=this.extend&&this.translations[r]?Object.assign(Object.assign({},b),this.translations[r]):b,this.updateLangs(),this.pending=!1},error:b=>{this.pending=!1}}),u}setTranslation(r,u,b=!1){u=this.compiler.compileTranslations(u,r),this.translations[r]=(b||this.extend)&&this.translations[r]?i(this.translations[r],u):u,this.updateLangs(),this.onTranslationChange.emit({lang:r,translations:this.translations[r]})}getLangs(){return this.langs}addLangs(r){r.forEach(u=>{-1===this.langs.indexOf(u)&&this.langs.push(u)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(r,u,b){let x;if(u instanceof Array){let M={},tt=!1;for(let et of u)M[et]=this.getParsedResult(r,et,b),(0,E.b)(M[et])&&(tt=!0);if(tt){const et=u.map(st=>(0,E.b)(M[st])?M[st]:(0,D.of)(M[st]));return(0,a.D)(et).pipe((0,$.U)(st=>{let rt={};return st.forEach((w,V)=>{rt[u[V]]=w}),rt}))}return M}if(r&&(x=this.parser.interpolate(this.parser.getValue(r,u),b)),void 0===x&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(x=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],u),b)),void 0===x){let M={key:u,translateService:this};void 0!==b&&(M.interpolateParams=b),x=this.missingTranslationHandler.handle(M)}return void 0!==x?x:u}get(r,u){if(!J(r)||!r.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,W.b)(b=>(b=this.getParsedResult(b,r,u),(0,E.b)(b)?b:(0,D.of)(b))));{let b=this.getParsedResult(this.translations[this.currentLang],r,u);return(0,E.b)(b)?b:(0,D.of)(b)}}getStreamOnTranslationChange(r,u){if(!J(r)||!r.length)throw new Error('Parameter "key" required');return(0,j.z)((0,z.P)(()=>this.get(r,u)),this.onTranslationChange.pipe((0,A.w)(b=>{const x=this.getParsedResult(b.translations,r,u);return"function"==typeof x.subscribe?x:(0,D.of)(x)})))}stream(r,u){if(!J(r)||!r.length)throw new Error('Parameter "key" required');return(0,j.z)((0,z.P)(()=>this.get(r,u)),this.onLangChange.pipe((0,A.w)(b=>{const x=this.getParsedResult(b.translations,r,u);return(0,E.b)(x)?x:(0,D.of)(x)})))}instant(r,u){if(!J(r)||!r.length)throw new Error('Parameter "key" required');let b=this.getParsedResult(this.translations[this.currentLang],r,u);if((0,E.b)(b)){if(r instanceof Array){let x={};return r.forEach((M,tt)=>{x[r[tt]]=r[tt]}),x}return r}return b}set(r,u,b=this.currentLang){this.translations[b][r]=this.compiler.compile(u,b),this.updateLangs(),this.onTranslationChange.emit({lang:b,translations:this.translations[b]})}changeLang(r){this.currentLang=r,this.onLangChange.emit({lang:r,translations:this.translations[r]}),null==this.defaultLang&&this.changeDefaultLang(r)}changeDefaultLang(r){this.defaultLang=r,this.onDefaultLangChange.emit({lang:r,translations:this.translations[r]})}reloadLang(r){return this.resetLang(r),this.getTranslation(r)}resetLang(r){this._translationRequests[r]=void 0,this.translations[r]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let r=window.navigator.languages?window.navigator.languages[0]:null;return r=r||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==r?(-1!==r.indexOf("-")&&(r=r.split("-")[0]),-1!==r.indexOf("_")&&(r=r.split("_")[0]),r):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let r=window.navigator.languages?window.navigator.languages[0]:null;return r=r||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,r}}return T.\u0275fac=function(r){return new(r||T)(e.LFG(p),e.LFG(H),e.LFG(c),e.LFG(n),e.LFG(Q),e.LFG(C),e.LFG(m),e.LFG(y),e.LFG(g))},T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac}),T})(),G=(()=>{class T{constructor(r,u){this.translate=r,this._ref=u,this.value=""}updateValue(r,u,b){let x=M=>{this.value=void 0!==M?M:r,this.lastKey=r,this._ref.markForCheck()};if(b){let M=this.translate.getParsedResult(b,r,u);(0,E.b)(M.subscribe)?M.subscribe(x):x(M)}this.translate.get(r,u).subscribe(x)}transform(r,...u){if(!r||!r.length)return r;if(B(r,this.lastKey)&&B(u,this.lastParams))return this.value;let b;if(J(u[0])&&u.length)if("string"==typeof u[0]&&u[0].length){let x=u[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{b=JSON.parse(x)}catch(M){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${u[0]}`)}}else"object"==typeof u[0]&&!Array.isArray(u[0])&&(b=u[0]);return this.lastKey=r,this.lastParams=u,this.updateValue(r,b),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(x=>{this.lastKey&&x.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(r,b,x.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(x=>{this.lastKey&&(this.lastKey=null,this.updateValue(r,b,x.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(r,b))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return T.\u0275fac=function(r){return new(r||T)(e.Y36(Y,16),e.Y36(e.sBO,16))},T.\u0275pipe=e.Yjl({name:"translate",type:T,pure:!1}),T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac}),T})(),ht=(()=>{class T{static forRoot(r={}){return{ngModule:T,providers:[r.loader||{provide:H,useClass:X},r.compiler||{provide:c,useClass:h},r.parser||{provide:n,useClass:o},r.missingTranslationHandler||{provide:Q,useClass:I},p,{provide:m,useValue:r.isolate},{provide:C,useValue:r.useDefaultLang},{provide:y,useValue:r.extend},{provide:g,useValue:r.defaultLanguage},Y]}}static forChild(r={}){return{ngModule:T,providers:[r.loader||{provide:H,useClass:X},r.compiler||{provide:c,useClass:h},r.parser||{provide:n,useClass:o},r.missingTranslationHandler||{provide:Q,useClass:I},{provide:m,useValue:r.isolate},{provide:C,useValue:r.useDefaultLang},{provide:y,useValue:r.extend},{provide:g,useValue:r.defaultLanguage},Y]}}}return T.\u0275fac=function(r){return new(r||T)},T.\u0275mod=e.oAB({type:T}),T.\u0275inj=e.cJS({}),T})()},5278:function(ot){ot.exports=function(){"use strict";function K(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function f(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,o)}return n}function e(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?f(Object(n),!0).forEach(function(o){K(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}const D=(t,i,n,o)=>(t=""+t,i=""+i,o&&(t=t.trim(),i=i.trim()),n?t==i:t.toLowerCase()==i.toLowerCase());function E(t,i){var n,o={};for(n in t)i.indexOf(n)<0&&(o[n]=t[n]);return o}function a(t){var i=document.createElement("div");return t.replace(/\&#?[0-9a-z]+;/gi,function(n){return i.innerHTML=n,i.innerText})}function j(t,i){for(i=i||"previous";t=t[i+"Sibling"];)if(3==t.nodeType)return t}function z(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):t}function q(t){var i=Object.prototype.toString.call(t).split(" ")[1].slice(0,-1);return t===Object(t)&&"Array"!=i&&"Function"!=i&&"RegExp"!=i&&"HTMLUnknownElement"!=i}function P(t,i,n){function o(c,h){for(var p in h)if(h.hasOwnProperty(p)){if(q(h[p])){q(c[p])?o(c[p],h[p]):c[p]=Object.assign({},h[p]);continue}if(Array.isArray(h[p])){c[p]=Object.assign([],h[p]);continue}c[p]=h[p]}}return t instanceof Object||(t={}),o(t,i),n&&o(t,n),t}function $(t){return String.prototype.normalize?"string"==typeof t?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:t}var W=()=>/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent),A={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,keepInvalidTags:!1,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:()=>{},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:"\xa0"},autoComplete:{enabled:!0,rightKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tag:"tagify__tag",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",inputInvalid:"tagify__input--invalid",tagX:"tagify__tag__removeBtn",tagText:"tagify__tag-text",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownInital:"tagify__dropdown--initial",scopeLoading:"tagify--loading",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,highlightFirst:!1,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:()=>Promise.resolve(),beforePaste:()=>Promise.resolve(),suggestionClick:()=>Promise.resolve()}};function H(){this.dropdown={};for(let t in this._dropdown)this.dropdown[t]="function"==typeof this._dropdown[t]?this._dropdown[t].bind(this):this._dropdown[t];this.settings.dropdown.enabled>=0&&this.dropdown.init()}var X,Q={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"};function J(t,i){return t?t.previousElementSibling&&t.previousElementSibling.classList.contains("tagify")?(console.warn("Tagify: ","input element is already Tagified",t),this):(P(this,function(n){var o=document.createTextNode("");function c(h,p,m){m&&p.split(/\s+/g).forEach(C=>o[h+"EventListener"].call(o,C,m))}return{off(h,p){return c("remove",h,p),this},on(h,p){return p&&"function"==typeof p&&c("add",h,p),this},trigger(h,p,m){var C;if(m=m||{cloneData:!0},h)if(n.settings.isJQueryPlugin)"remove"==h&&(h="removeTag"),jQuery(n.DOM.originalInput).triggerHandler(h,[p]);else{try{var g="object"==typeof p?p:{value:p};if((g=m.cloneData?P({},g):g).tagify=this,p instanceof Object)for(var y in p)p[y]instanceof HTMLElement&&(g[y]=p[y]);C=new CustomEvent(h,{detail:g})}catch(L){console.warn(L)}o.dispatchEvent(C)}}}}(this)),this.isFirefox="undefined"!=typeof InstallTrigger,this.isIE=window.document.documentMode,this.applySettings(t,i||{}),this.state={inputText:"",editing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(t),H.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),void(t.autofocus&&this.DOM.input.focus())):(console.warn("Tagify: ","input element not found",t),this)}return(J.prototype={_dropdown:{init(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector(this.settings.classNames.dropdownWrapperSelector)},show(t){var i,n,o,c=this.settings,h="mix"==c.mode&&!c.enforceWhitelist,m="manual"==c.dropdown.position;if(t=void 0===t?this.state.inputText:t,(c.whitelist&&c.whitelist.length||h||c.templates.dropdownItemNoMatch)&&!1!==c.dropdown.enable&&!this.state.isLoading){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(t),t&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",t),c.templates.dropdownItemNoMatch&&(o=c.templates.dropdownItemNoMatch.call(this,{value:t}))),!o){if(this.suggestedListItems.length)t&&h&&!this.state.editing.scope&&!D(this.suggestedListItems[0].value,t)&&this.suggestedListItems.unshift({value:t});else{if(!t||!h||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:t}]}n=""+(q(i=this.suggestedListItems[0])?i.value:i),c.autoComplete&&n&&0==n.indexOf(t)&&this.input.autocomplete.suggest.call(this,i)}this.dropdown.fill(o),c.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.children[0]),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=t||!0,this.state.dropdown.query=t,this.setStateSelection(),m||setTimeout(()=>{this.dropdown.position(),this.dropdown.render()}),setTimeout(()=>{this.trigger("dropdown:show",this.DOM.dropdown)})}},hide(t){var i=this.DOM,n=i.scope,o=i.dropdown,c="manual"==this.settings.dropdown.position&&!t;if(o&&document.body.contains(o)&&!c)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),n.setAttribute("aria-expanded",!1),o.parentNode.removeChild(o),setTimeout(()=>{this.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",o),this},toggle(t){this.dropdown[this.state.dropdown.visible&&!t?"hide":"show"]()},render(){var i,n,o=((n=this.DOM.dropdown.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(n),i=n.clientHeight,n.parentNode.removeChild(n),i),c=this.settings;return this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(c.classNames.dropdownInital),this.dropdown.position(o),c.dropdown.appendTarget.appendChild(this.DOM.dropdown),setTimeout(()=>this.DOM.dropdown.classList.remove(c.classNames.dropdownInital))),this},fill(t){var i;t="string"==typeof t?t:this.dropdown.createListHTML(t||this.suggestedListItems),this.DOM.dropdown.content.innerHTML=(i=t)?i.replace(/\>[\r\n ]+\</g,"><").replace(/(<.*?>)|\s+/g,(n,o)=>o||" "):""},refilter(t){this.suggestedListItems=this.dropdown.filterListItems(t=t||this.state.dropdown.query||""),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},position(t){var i=this.settings.dropdown;if("manual"!=i.position){var n,o,c,h,p,m,C=this.DOM.dropdown,g=i.placeAbove,y=document.documentElement.clientHeight,L=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)>480?i.position:"all",N=this.DOM["input"==L?"input":"scope"];t=t||C.clientHeight,this.state.dropdown.visible&&("text"==L?(c=(n=this.getCaretGlobalPosition()).bottom,o=n.top,h=n.left,p="auto"):(m=function(F){for(var Y=0,U=0;F;)Y+=F.offsetLeft||0,U+=F.offsetTop||0,F=F.parentNode;return{left:Y,top:U}}(this.settings.dropdown.appendTarget),o=(n=N.getBoundingClientRect()).top-m.top,c=n.bottom-1-m.top,h=n.left-m.left,p=n.width+"px"),o=Math.floor(o),c=Math.ceil(c),g=void 0===g?y-n.bottom<t:g,C.style.cssText="left:"+(h+window.pageXOffset)+"px; width:"+p+";"+(g?"top: "+(o+window.pageYOffset)+"px":"top: "+(c+window.pageYOffset)+"px"),C.setAttribute("placement",g?"top":"bottom"),C.setAttribute("position",L))}},events:{binding(t=!0){var i=this.dropdown.events.callbacks,n=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this),onKeyDown:i.onKeyDown.bind(this),onMouseOver:i.onMouseOver.bind(this),onMouseLeave:i.onMouseLeave.bind(this),onClick:i.onClick.bind(this),onScroll:i.onScroll.bind(this)},o=t?"addEventListener":"removeEventListener";"manual"!=this.settings.dropdown.position&&(window[o]("resize",n.position),window[o]("keydown",n.onKeyDown)),this.DOM.dropdown[o]("mouseover",n.onMouseOver),this.DOM.dropdown[o]("mouseleave",n.onMouseLeave),this.DOM.dropdown[o]("mousedown",n.onClick),this.DOM.dropdown.content[o]("scroll",n.onScroll)},callbacks:{onKeyDown(t){var i=this.DOM.dropdown.querySelector(this.settings.classNames.dropdownItemActiveSelector),n=this.dropdown.getSuggestionDataByNode(i);switch(t.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":var o;t.preventDefault(),i&&(i=i[("ArrowUp"==t.key||"Up"==t.key?"previous":"next")+"ElementSibling"]),i||(i=(o=this.DOM.dropdown.content.children)["ArrowUp"==t.key||"Up"==t.key?o.length-1:0]),n=this.dropdown.getSuggestionDataByNode(i),this.dropdown.highlightOption(i,!0);break;case"Escape":case"Esc":this.dropdown.hide();break;case"ArrowRight":if(this.state.actions.ArrowLeft)return;case"Tab":if("mix"!=this.settings.mode&&i&&!this.settings.autoComplete.rightKey&&!this.state.editing){t.preventDefault();var c=this.dropdown.getMappedValue(n);return this.input.autocomplete.set.call(this,c),!1}return!0;case"Enter":t.preventDefault(),this.settings.hooks.suggestionClick(t,{tagify:this,tagData:n,suggestionElm:i}).then(()=>{if(i)return this.dropdown.selectOption(i);this.dropdown.hide(),"mix"!=this.settings.mode&&this.addTags(this.state.inputText.trim(),!0)}).catch(h=>h);break;case"Backspace":{if("mix"==this.settings.mode||this.state.editing.scope)return;let h=this.state.inputText.trim();""!=h&&8203!=h.charCodeAt(0)||(!0===this.settings.backspace?this.removeTags():"edit"==this.settings.backspace&&setTimeout(this.editTag.bind(this),0))}}},onMouseOver(t){var i=t.target.closest(this.settings.classNames.dropdownItemSelector);i&&this.dropdown.highlightOption(i)},onMouseLeave(t){this.dropdown.highlightOption()},onClick(t){if(0==t.button&&t.target!=this.DOM.dropdown&&t.target!=this.DOM.dropdown.content){var i=t.target.closest(this.settings.classNames.dropdownItemSelector),n=this.dropdown.getSuggestionDataByNode(i);this.state.actions.selectOption=!0,setTimeout(()=>this.state.actions.selectOption=!1,50),this.settings.hooks.suggestionClick(t,{tagify:this,tagData:n,suggestionElm:i}).then(()=>{i?this.dropdown.selectOption(i):this.dropdown.hide()}).catch(o=>o)}},onScroll(t){var i=t.target;this.trigger("dropdown:scroll",{percentage:Math.round(i.scrollTop/(i.scrollHeight-i.parentNode.clientHeight)*100)})}}},getSuggestionDataByNode(t){var i=t?+t.getAttribute("tagifySuggestionIdx"):-1;return this.suggestedListItems[i]||null},highlightOption(t,i){var n,o=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(o),this.state.ddItemElm.removeAttribute("aria-selected")),!t)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);n=this.suggestedListItems[this.getNodeIndex(t)],this.state.ddItemData=n,this.state.ddItemElm=t,t.classList.add(o),t.setAttribute("aria-selected",!0),i&&(t.parentNode.scrollTop=t.clientHeight+t.offsetTop-t.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,n),this.dropdown.position())},selectOption(t){var i,n=this.settings.dropdown,o=n.clearOnSelect,c=n.closeOnSelect;if(!t)return i=this.addTags(this.state.inputText,!0),void(c&&this.dropdown.hide());var h=t.getAttribute("tagifySuggestionIdx"),p=this.suggestedListItems[+h];this.trigger("dropdown:select",{data:p,elm:t}),h&&p?(this.state.editing?this.onEditTagDone(null,P({__isValid:!0},p)):i=this["mix"==this.settings.mode?"addMixTags":"addTags"]([p],o),this.DOM.input.parentNode&&(setTimeout(()=>{this.DOM.input.focus(),this.toggleFocusClass(!0),this.placeCaretAfterNode(i)}),c?setTimeout(this.dropdown.hide.bind(this)):this.dropdown.refilter())):this.dropdown.hide()},selectAll(){return this.suggestedListItems.length=0,this.dropdown.hide(),this.addTags(this.dropdown.filterListItems(""),!0),this},filterListItems(t,i){var n,o,c,h,p,m=this.settings,C=m.dropdown,g=(i=i||{},t="select"==m.mode&&this.value.length&&this.value[0][m.tagTextProp]==t?"":t,[]),y=m.whitelist,L=C.maxItems||1/0,N=C.searchKeys,F=0;if(!t||!N.length)return(m.duplicates?y:y.filter(U=>!this.isTagDuplicate(q(U)?U.value:U))).slice(0,L);function Y(U,G){return G.toLowerCase().split(" ").every(nt=>U.includes(nt.toLowerCase()))}for(p=C.caseSensitive?""+t:(""+t).toLowerCase();F<y.length;F++){n=y[F]instanceof Object?y[F]:{value:y[F]};let U=Object.keys(n).some(G=>N.includes(G))?N:["value"];if(C.fuzzySearch&&!i.exact?(c=U.reduce((G,nt)=>G+" "+(n[nt]||""),"").toLowerCase(),C.accentedSearch&&(c=$(c),p=$(p)),o=Y(c,p)):o=U.some(G=>{var nt=""+(n[G]||"");return C.accentedSearch&&(nt=$(nt),p=$(p)),C.caseSensitive||(nt=nt.toLowerCase()),i.exact?nt==p:0==nt.indexOf(p)}),h=!m.duplicates&&this.isTagDuplicate(q(n)?n.value:n),o&&!h&&L--&&g.push(n),0==L)break}return g},getMappedValue(t){var i=this.settings.dropdown.mapValueTo;return i?"function"==typeof i?i(t):t[i]||t.value:t.value},createListHTML(t){return P([],t).map((i,n)=>{"string"!=typeof i&&"number"!=typeof i||(i={value:i});var o=this.dropdown.getMappedValue(i);return i.value=o&&"string"==typeof o?z(o):o,this.settings.templates.dropdownItem.apply(this,[i,this]).replace(/\s*tagifySuggestionIdx=(["'])(.*?)\1/gim,"").replace(">",` tagifySuggestionIdx="${n}">`)}).join("")}},customEventsList:["change","add","remove","invalid","input","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim(t){return this.settings.trim&&t&&"string"==typeof t?t.trim():t},parseHTML:function(t){return(new DOMParser).parseFromString(t.trim(),"text/html").body.firstElementChild},templates:{wrapper:(t,i)=>`<tags class="${i.classNames.namespace} ${i.mode?`${i.classNames[i.mode+"Mode"]}`:""} ${t.className}"\n                    ${i.readonly?"readonly":""}\n                    ${i.disabled?"disabled":""}\n                    ${i.required?"required":""}\n                    tabIndex="-1">\n            <span ${!i.readonly&&i.userInput?"contenteditable":""} tabIndex="0" data-placeholder="${i.placeholder||"&#8203;"}" aria-placeholder="${i.placeholder||""}"\n                class="${i.classNames.input}"\n                role="textbox"\n                aria-autocomplete="both"\n                aria-multiline="${"mix"==i.mode}"></span>\n        </tags>`,tag(t,i){var n=this.settings;return`<tag title="${t.title||t.value}"\n                    contenteditable='false'\n                    spellcheck='false'\n                    tabIndex="${n.a11y.focusableTags?0:-1}"\n                    class="${n.classNames.tag} ${t.class||""}"\n                    ${this.getAttributes(t)}>\n            <x title='' class="${n.classNames.tagX}" role='button' aria-label='remove tag'></x>\n            <div>\n                <span class="${n.classNames.tagText}">${t[n.tagTextProp]||t.value}</span>\n            </div>\n        </tag>`},dropdown(t){var i=t.dropdown;return`<div class="${"manual"==i.position?"":`${t.classNames.dropdown}`} ${i.classname}" role="listbox" aria-labelledby="dropdown">\n                    <div class="${t.classNames.dropdownWrapper}"></div>\n                </div>`},dropdownItem(t,i){return`<div ${this.getAttributes(t)}\n                    class='${this.settings.classNames.dropdownItem} ${t.class?t.class:""}'\n                    tabindex="0"\n                    role="option">${t.value}</div>`},dropdownItemNoMatch:null},parseTemplate(t,i){return this.parseHTML((t=this.settings.templates[t]||t).apply(this,i))},set whitelist(t){this.settings.whitelist=t&&Array.isArray(t)?t:[]},get whitelist(){return this.settings.whitelist},applySettings(t,i){A.templates=this.templates;var n=this.settings=P({},A,i);n.disabled=t.hasAttribute("disabled"),n.readonly=t.hasAttribute("readonly"),n.placeholder=t.getAttribute("placeholder")||n.placeholder||"",n.required=t.hasAttribute("required");for(let o in n.classNames)Object.defineProperty(n.classNames,o+"Selector",{get(){return"."+this[o].split(" ")[0]}});if(this.isIE&&(n.autoComplete=!1),["whitelist","blacklist"].forEach(o=>{var c=t.getAttribute("data-"+o);c&&(c=c.split(n.delimiters))instanceof Array&&(n[o]=c)}),"autoComplete"in i&&!q(i.autoComplete)&&(n.autoComplete=A.autoComplete,n.autoComplete.enabled=i.autoComplete),"mix"==n.mode&&(n.autoComplete.rightKey=!0,n.delimiters=i.delimiters||null,n.tagTextProp&&!n.dropdown.searchKeys.includes(n.tagTextProp)&&n.dropdown.searchKeys.push(n.tagTextProp)),t.pattern)try{n.pattern=new RegExp(t.pattern)}catch(o){}if(this.settings.delimiters)try{n.delimiters=new RegExp(this.settings.delimiters,"g")}catch(o){}this.TEXTS=e(e({},Q),n.texts||{}),"select"!=n.mode&&n.userInput||(n.dropdown.enabled=0),n.dropdown.appendTarget=i.dropdown&&i.dropdown.appendTarget?i.dropdown.appendTarget:document.body},getAttributes(t){var i,n=this.getCustomAttributes(t),o="";for(i in n)o+=" "+i+(void 0!==t[i]?`="${n[i]}"`:"");return o},getCustomAttributes(t){if(!q(t))return"";var i,n={};for(i in t)"__"!=i.slice(0,2)&&"class"!=i&&t.hasOwnProperty(i)&&void 0!==t[i]&&(n[i]=z(t[i]));return n},setStateSelection(){var t=window.getSelection(),i={anchorOffset:t.anchorOffset,anchorNode:t.anchorNode,range:t.getRangeAt&&t.rangeCount&&t.getRangeAt(0)};return this.state.selection=i,i},getCaretGlobalPosition(){const t=document.getSelection();if(t.rangeCount){const i=t.getRangeAt(0),n=i.startContainer,o=i.startOffset;let c,h;if(o>0)return h=document.createRange(),h.setStart(n,o-1),h.setEnd(n,o),c=h.getBoundingClientRect(),{left:c.right,top:c.top,bottom:c.bottom};if(n.getBoundingClientRect)return n.getBoundingClientRect()}return{left:-9999,top:-9999}},getCSSVars(){var t=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(({value:n,unit:o})=>"s"==o?1e3*n:n)(function(n){if(!n)return{};var o=(n=n.trim().split(" ")[0]).split(/\d+/g).filter(c=>c).pop().trim();return{value:+n.split(o).filter(c=>c)[0].trim(),unit:o}}(("tag-hide-transition",t.getPropertyValue("--tag-hide-transition"))))}},build(t){var i=this.DOM;this.settings.mixMode.integrated?(i.originalInput=null,i.scope=t,i.input=t):(i.originalInput=t,i.scope=this.parseTemplate("wrapper",[t,this.settings]),i.input=i.scope.querySelector(this.settings.classNames.inputSelector),t.parentNode.insertBefore(i.scope,t))},destroy(){this.events.unbindGlobal.call(this),this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.dropdown.hide(!0),clearTimeout(this.dropdownHide__bindEventsTimeout)},loadOriginalValues(t){var i,n=this.settings;if(void 0===t&&(t=n.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value),this.removeAllTags({withoutChangeEvent:!0}),t)if("mix"==n.mode)this.parseMixTags(t.trim()),(i=this.DOM.input.lastChild)&&"BR"==i.tagName||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{JSON.parse(t)instanceof Array&&(t=JSON.parse(t))}catch(o){}this.addTags(t).forEach(o=>o&&o.classList.add(n.classNames.tagNoAnimation))}else this.postUpdate();this.state.lastOriginalValueReported=n.mixMode.integrated?"":this.DOM.originalInput.value,this.state.loadedOriginalValues=!0},cloneEvent(t){var i={};for(var n in t)i[n]=t[n];return i},loading(t){return this.state.isLoading=t,this.DOM.scope.classList[t?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading(t,i){return t&&t.classList[i?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass(t,i){"string"==typeof t&&this.DOM.scope.classList.toggle(t,i)},toggleFocusClass(t){this.toggleClass(this.settings.classNames.focus,!!t)},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var t=this.DOM.originalInput,i=this.state.lastOriginalValueReported!==t.value,n=new CustomEvent("change",{bubbles:!0});i&&(this.state.lastOriginalValueReported=t.value,n.simulated=!0,t._valueTracker&&t._valueTracker.setValue(Math.random()),t.dispatchEvent(n),this.trigger("change",this.state.lastOriginalValueReported),t.value=this.state.lastOriginalValueReported)}},events:{customBinding(){this.customEventsList.forEach(t=>{this.on(t,this.settings.callbacks[t])})},binding(t=!0){var i,n=this.events.callbacks,o=t?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!t)for(var c in this.state.mainEvents=t,t&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),i=this.listeners.main=this.listeners.main||{focus:["input",n.onFocusBlur.bind(this)],keydown:["input",n.onKeydown.bind(this)],click:["scope",n.onClickScope.bind(this)],dblclick:["scope",n.onDoubleClickScope.bind(this)],paste:["input",n.onPaste.bind(this)]})this.DOM[i[c][0]][o](c,i[c][1])},bindGlobal(t){var i,n=this.events.callbacks,o=t?"removeEventListener":"addEventListener";if(t||!this.listeners.global)for(i of(this.listeners.global=this.listeners&&this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:n[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:n.onWindowKeyDown.bind(this)},{type:"blur",target:this.DOM.input,cb:n.onFocusBlur.bind(this)}],this.listeners.global))i.target[o](i.type,i.cb)},unbindGlobal(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur(t){var i=t.target?this.trim(t.target.textContent):"",n=this.settings,o=t.type,c=n.dropdown.enabled>=0,h={relatedTarget:t.relatedTarget},p=this.state.actions.selectOption&&(c||!n.dropdown.closeOnSelect),m=this.state.actions.addNew&&c,C=t.relatedTarget&&t.relatedTarget.classList.contains(n.classNames.tag)&&this.DOM.scope.contains(t.relatedTarget);if("blur"==o){if(t.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),this.triggerChangeEvent()}if(!p&&!m)if(this.state.hasFocus="focus"==o&&+new Date,this.toggleFocusClass(this.state.hasFocus),"mix"!=n.mode){if("focus"==o)return this.trigger("focus",h),void(0!==n.dropdown.enabled&&n.userInput||this.dropdown.show());"blur"==o&&(this.trigger("blur",h),this.loading(!1),"select"==this.settings.mode&&C&&(i=""),("select"==this.settings.mode&&i?!this.value.length||this.value[0].value!=i:i&&!this.state.actions.selectOption&&n.addTagOnBlur)&&this.addTags(i,!0),"select"!=this.settings.mode||i||this.removeTags()),this.DOM.input.removeAttribute("style"),this.dropdown.hide()}else"focus"==o?this.trigger("focus",h):"blur"==t.type&&(this.trigger("blur",h),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onWindowKeyDown(t){var i,n=document.activeElement;if(n.classList.contains(this.settings.classNames.tag)&&this.DOM.scope.contains(document.activeElement))switch(i=n.nextElementSibling,t.key){case"Backspace":this.removeTags(n),(i||this.DOM.input).focus();break;case"Enter":setTimeout(this.editTag.bind(this),0,n)}},onKeydown(t){"select"==this.settings.mode&&this.settings.enforceWhitelist&&this.value.length&&t.preventDefault();var i=this.trim(t.target.textContent);if(this.trigger("keydown",{originalEvent:this.cloneEvent(t)}),"mix"==this.settings.mode){switch(t.key){case"Left":case"ArrowLeft":this.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(this.state.editing)return;var n,o,c,h=document.getSelection(),p="Delete"==t.key&&h.anchorOffset==(h.anchorNode.length||0),m=1==h.anchorNode.nodeType||!h.anchorOffset&&h.anchorNode.previousElementSibling,C=a(this.DOM.input.innerHTML),g=this.getTagElms();if("edit"==this.settings.backspace&&m)return n=1==h.anchorNode.nodeType?null:h.anchorNode.previousElementSibling,setTimeout(this.editTag.bind(this),0,n),void t.preventDefault();if(W()&&m)return c=j(m),m.hasAttribute("readonly")||m.remove(),this.DOM.input.focus(),void setTimeout(()=>{this.placeCaretAfterNode(c),this.DOM.input.click()});if("BR"==h.anchorNode.nodeName)return;if((p||m)&&1==h.anchorNode.nodeType?o=0==h.anchorOffset?p?g[0]:null:g[h.anchorOffset-1]:p?o=h.anchorNode.nextElementSibling:m&&(o=m),3==h.anchorNode.nodeType&&!h.anchorNode.nodeValue&&h.anchorNode.previousElementSibling&&t.preventDefault(),(m||p)&&!this.settings.backspace||"Range"!=h.type&&!h.anchorOffset&&h.anchorNode==this.DOM.input&&"Delete"!=t.key)return void t.preventDefault();if("Range"!=h.type&&o&&o.hasAttribute("readonly"))return void this.placeCaretAfterNode(j(o));clearTimeout(X),X=setTimeout(()=>{var y=document.getSelection(),L=a(this.DOM.input.innerHTML),N=!p&&y.anchorNode.previousElementSibling;if(!W()&&L.length>=C.length&&N&&!N.hasAttribute("readonly")&&(this.removeTags(N),this.fixFirefoxLastTagNoCaret(),2==this.DOM.input.children.length&&"BR"==this.DOM.input.children[1].tagName))return this.DOM.input.innerHTML="",this.value.length=0,!0;this.value=[].map.call(g,(F,Y)=>{var U=this.tagData(F);if(F.parentNode||U.readonly)return U;this.trigger("remove",{tag:F,index:Y,data:U})}).filter(F=>F)},20)}return!0}switch(t.key){case"Backspace":"select"==this.settings.mode&&this.settings.enforceWhitelist?this.removeTags():this.state.dropdown.visible&&"manual"!=this.settings.dropdown.position||""!=i&&8203!=i.charCodeAt(0)||(!0===this.settings.backspace?this.removeTags():"edit"==this.settings.backspace&&setTimeout(this.editTag.bind(this),0));break;case"Esc":case"Escape":if(this.state.dropdown.visible)return;t.target.blur();break;case"Down":case"ArrowDown":this.state.dropdown.visible||this.dropdown.show();break;case"ArrowRight":{let y=this.state.inputSuggestion||this.state.ddItemData;if(y&&this.settings.autoComplete.rightKey)return void this.addTags([y],!0);break}case"Tab":{let y="select"==this.settings.mode;if(!i||y)return!0;t.preventDefault()}case"Enter":if(this.state.dropdown.visible||229==t.keyCode)return;t.preventDefault(),setTimeout(()=>{this.state.actions.selectOption||this.addTags(i,!0)})}},onInput(t){if("mix"==this.settings.mode)return this.events.callbacks.onMixTagsInput.call(this,t);var i=this.input.normalize.call(this),n=i.length>=this.settings.dropdown.enabled,o={value:i,inputElm:this.DOM.input};o.isValid=this.validateTag({value:i}),this.state.inputText!=i&&(this.input.set.call(this,i,!1),-1!=i.search(this.settings.delimiters)?this.addTags(i)&&this.input.set.call(this):this.settings.dropdown.enabled>=0&&this.dropdown[n?"show":"hide"](i),this.trigger("input",o))},onMixTagsInput(t){var i,n,o,c,h,p,m,C,g=this.settings,y=this.value.length,L=this.getTagElms(),N=document.createDocumentFragment(),F=window.getSelection().getRangeAt(0),Y=[].map.call(L,U=>this.tagData(U).value);if("deleteContentBackward"==t.inputType&&W()&&this.events.callbacks.onKeydown.call(this,{target:t.target,key:"Backspace"}),this.value.slice().forEach(U=>{U.readonly&&!Y.includes(U.value)&&N.appendChild(this.createTagElem(U))}),N.childNodes.length&&(F.insertNode(N),this.setRangeAtStartEnd(!1,N.lastChild)),L.length!=y)return this.value=[].map.call(this.getTagElms(),U=>this.tagData(U)),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(p=window.getSelection()).rangeCount>0&&3==p.anchorNode.nodeType){if((F=p.getRangeAt(0).cloneRange()).collapse(!0),F.setStart(p.focusNode,0),o=(i=F.toString().slice(0,F.endOffset)).split(g.pattern).length-1,(n=i.match(g.pattern))&&(c=i.slice(i.lastIndexOf(n[n.length-1]))),c){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:c.match(g.pattern)[0],value:c.replace(g.pattern,"")},this.state.tag.baseOffset=p.baseOffset-this.state.tag.value.length,C=this.state.tag.value.match(g.delimiters))return this.state.tag.value=this.state.tag.value.replace(g.delimiters,""),this.state.tag.delimiters=C[0],this.addTags(this.state.tag.value,g.dropdown.clearOnSelect),void this.dropdown.hide();h=this.state.tag.value.length>=g.dropdown.enabled;try{m=(m=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&m.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch(U){}(m||o<this.state.mixMode.matchedPatternCount)&&(h=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=o}setTimeout(()=>{this.update({withoutChangeEvent:!0}),this.trigger("input",P({},this.state.tag,{textContent:this.DOM.input.textContent})),this.state.tag&&this.dropdown[h?"show":"hide"](this.state.tag.value)},10)},onInputIE(t){var i=this;setTimeout(function(){i.events.callbacks.onInput.call(i,t)})},onClickScope(t){var i=this.settings,n=t.target.closest("."+i.classNames.tag),o=+new Date-this.state.hasFocus;if(t.target!=this.DOM.scope){if(!t.target.classList.contains(i.classNames.tagX))return n?(this.trigger("click",{tag:n,index:this.getNodeIndex(n),data:this.tagData(n),originalEvent:this.cloneEvent(t)}),void(1!==i.editTags&&1!==i.editTags.clicks||this.events.callbacks.onDoubleClickScope.call(this,t))):void(t.target==this.DOM.input&&("mix"==i.mode&&this.fixFirefoxLastTagNoCaret(),o>500)?this.state.dropdown.visible?this.dropdown.hide():0===i.dropdown.enabled&&"mix"!=i.mode&&this.dropdown.show():"select"==i.mode&&!this.state.dropdown.visible&&this.dropdown.show());this.removeTags(t.target.parentNode)}else this.state.hasFocus||this.DOM.input.focus()},onPaste(t){t.preventDefault();var i,n,o=this.settings;if("select"==o.mode&&o.enforceWhitelist||!o.userInput)return!1;o.readonly||(i=t.clipboardData||window.clipboardData,n=i.getData("Text"),o.hooks.beforePaste(t,{tagify:this,pastedText:n,clipboardData:i}).then(c=>{void 0===c&&(c=n),c&&(this.injectAtCaret(c,window.getSelection().getRangeAt(0)),"mix"==this.settings.mode?this.events.callbacks.onMixTagsInput.call(this,t):this.settings.pasteAsTags?this.addTags(c,!0):this.state.inputText=c)}).catch(c=>c))},onEditTagInput(t,i){var n=t.closest("."+this.settings.classNames.tag),o=this.getNodeIndex(n),c=this.tagData(n),h=this.input.normalize.call(this,t),p=n.innerHTML!=n.__tagifyTagData.__originalHTML,m=this.validateTag({[this.settings.tagTextProp]:h});p||!0!==t.originalIsValid||(m=!0),n.classList.toggle(this.settings.classNames.tagInvalid,!0!==m),c.__isValid=m,n.title=!0===m?c.title||c.value:m,h.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=h),this.dropdown.show(h)),this.trigger("edit:input",{tag:n,index:o,data:P({},this.value[o],{newValue:h}),originalEvent:this.cloneEvent(i)})},onEditTagFocus(t){this.state.editing={scope:t,input:t.querySelector("[contenteditable]")}},onEditTagBlur(t){if(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(t)){var i,n,o=this.settings,c=t.closest("."+o.classNames.tag),h=this.input.normalize.call(this,t),p=this.tagData(c).__originalData,m=c.innerHTML!=c.__tagifyTagData.__originalHTML,C=this.validateTag({[o.tagTextProp]:h});if(h)if(m){if(i=this.hasMaxTags(),n=this.getWhitelistItem(h)||P({},p,{[o.tagTextProp]:h,value:h,__isValid:C}),o.transformTag.call(this,n,p),!0!==(C=!i&&this.validateTag({[o.tagTextProp]:n[o.tagTextProp]}))){if(this.trigger("invalid",{data:n,tag:c,message:C}),o.editTags.keepInvalid)return;o.keepInvalidTags?n.__isValid=C:n=p}else o.keepInvalidTags&&(delete n.title,delete n["aria-invalid"],delete n.class);this.onEditTagDone(c,n)}else this.onEditTagDone(c,p);else this.onEditTagDone(c)}},onEditTagkeydown(t,i){switch(this.trigger("edit:keydown",{originalEvent:this.cloneEvent(t)}),t.key){case"Esc":case"Escape":i.innerHTML=i.__tagifyTagData.__originalHTML;case"Enter":case"Tab":t.preventDefault(),t.target.blur()}},onDoubleClickScope(t){var i,n,o=t.target.closest("."+this.settings.classNames.tag),c=this.settings;o&&c.userInput&&(i=o.classList.contains(this.settings.classNames.tagEditing),n=o.hasAttribute("readonly"),"select"==c.mode||c.readonly||i||n||!this.settings.editTags||this.editTag(o),this.toggleFocusClass(!0),this.trigger("dblclick",{tag:o,index:this.getNodeIndex(o),data:this.tagData(o)}))}}},fixFirefoxLastTagNoCaret(){},placeCaretAfterNode(t){if(t&&t.parentNode){var i=t.nextSibling,n=window.getSelection(),o=n.getRangeAt(0);n.rangeCount&&(o.setStartBefore(i||t),o.setEndBefore(i||t),n.removeAllRanges(),n.addRange(o))}},insertAfterTag(t,i){if(i=i||this.settings.mixMode.insertAfterTag,t&&t.parentNode&&i)return i="string"==typeof i?document.createTextNode(i):i,t.parentNode.insertBefore(i,t.nextSibling),i},editTag(t,i){t=t||this.getLastTag(),i=i||{},this.dropdown.hide();var n=this.settings;function o(){return t.querySelector(n.classNames.tagTextSelector)}var c=o(),h=this.getNodeIndex(t),p=this.tagData(t),m=this.events.callbacks,C=this,g=!0;if(c){if(!(p instanceof Object&&"editable"in p)||p.editable)return c.setAttribute("contenteditable",!0),t.classList.add(n.classNames.tagEditing),this.tagData(t,{__originalData:P({},p),__originalHTML:t.innerHTML}),c.addEventListener("focus",m.onEditTagFocus.bind(this,t)),c.addEventListener("blur",function(){setTimeout(()=>m.onEditTagBlur.call(C,o()))}),c.addEventListener("input",m.onEditTagInput.bind(this,c)),c.addEventListener("keydown",y=>m.onEditTagkeydown.call(this,y,t)),c.focus(),this.setRangeAtStartEnd(!1,c),i.skipValidation||(g=this.editTagToggleValidity(t)),c.originalIsValid=g,this.trigger("edit:start",{tag:t,index:h,data:p,isValid:g}),this}else console.warn("Cannot find element in Tag template: .",n.classNames.tagTextSelector)},editTagToggleValidity(t,i){var n;if(i=i||this.tagData(t))return(n=!("__isValid"in i)||!0===i.__isValid)||this.removeTagsFromValue(t),this.update(),t.classList.toggle(this.settings.classNames.tagNotAllowed,!n),i.__isValid;console.warn("tag has no data: ",t,i)},onEditTagDone(t,i){i=i||{};var n={tag:t=t||this.state.editing.scope,index:this.getNodeIndex(t),previousData:this.tagData(t),data:i};this.trigger("edit:beforeUpdate",n,{cloneData:!1}),this.state.editing=!1,delete i.__originalData,delete i.__originalHTML,t&&i[this.settings.tagTextProp]?(t=this.replaceTag(t,i),this.editTagToggleValidity(t,i),this.settings.a11y.focusableTags&&t.focus()):t&&this.removeTags(t),this.trigger("edit:updated",n),this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag(t,i){i&&i.value||(i=t.__tagifyTagData),i.__isValid&&1!=i.__isValid&&P(i,this.getInvalidTagAttrs(i,i.__isValid));var n=this.createTagElem(i);return t.parentNode.replaceChild(n,t),this.updateValueByDOMTags(),n},updateValueByDOMTags(){this.value.length=0,[].forEach.call(this.getTagElms(),t=>{t.classList.contains(this.settings.classNames.tagNotAllowed.split(" ")[0])||this.value.push(this.tagData(t))}),this.update()},setRangeAtStartEnd(t,i){t="number"==typeof t?t:!!t,i=(i=i||this.DOM.input).lastChild||i;var n=document.getSelection();try{n.rangeCount>=1&&["Start","End"].forEach(o=>n.getRangeAt(0)["set"+o](i,t||i.length))}catch(o){console.warn("Tagify: ",o)}},injectAtCaret(t,i){if(i=i||this.state.selection.range)return"string"==typeof t&&(t=document.createTextNode(t)),i.deleteContents(),i.insertNode(t),this.setRangeAtStartEnd(!1,t),this.updateValueByDOMTags(),this.update(),this},input:{set(t="",i=!0){var n=this.settings.dropdown.closeOnSelect;this.state.inputText=t,i&&(this.DOM.input.innerHTML=z(""+t)),!t&&n&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},validate(){var t=!this.state.inputText||!0===this.validateTag({value:this.state.inputText});return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!t),t},normalize(t){var n=[];(t||this.DOM.input).childNodes.forEach(o=>3==o.nodeType&&n.push(o.nodeValue)),n=n.join("\n");try{n=n.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch(o){}return n=n.replace(/\s/g," "),this.settings.trim&&(n=n.replace(/^\s+/,"")),n},autocomplete:{suggest(t){if(this.settings.autoComplete.enabled){"string"==typeof(t=t||{})&&(t={value:t});var i=t.value?""+t.value:"",n=i.substr(0,this.state.inputText.length).toLowerCase(),o=i.substring(this.state.inputText.length);i&&this.state.inputText&&n==this.state.inputText.toLowerCase()?(this.DOM.input.setAttribute("data-suggest",o),this.state.inputSuggestion=t):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}},set(t){var i=this.DOM.input.getAttribute("data-suggest"),n=t||(i?this.state.inputText+i:null);return!!n&&("mix"==this.settings.mode?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+n)):(this.input.set.call(this,n),this.setRangeAtStartEnd()),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx(t){return this.value.findIndex(i=>i.__tagId==(t||{}).__tagId)},getNodeIndex(t){var i=0;if(t)for(;t=t.previousElementSibling;)i++;return i},getTagElms(...t){var i="."+[...this.settings.classNames.tag.split(" "),...t].join(".");return[].slice.call(this.DOM.scope.querySelectorAll(i))},getLastTag(){var t=this.DOM.scope.querySelectorAll(`${this.settings.classNames.tagSelector}:not(.${this.settings.classNames.tagHide}):not([readonly])`);return t[t.length-1]},tagData:(t,i,n)=>t?(i&&(t.__tagifyTagData=n?i:P({},t.__tagifyTagData||{},i)),t.__tagifyTagData):(console.warn("tag elment doesn't exist",t,i),i),isTagDuplicate(t,i){var n=this.settings;return"select"!=n.mode&&this.value.reduce((o,c)=>D(this.trim(""+t),c.value,i||n.dropdown.caseSensitive)?o+1:o,0)},getTagIndexByValue(t){var i=[];return this.getTagElms().forEach((n,o)=>{D(this.trim(n.textContent),t,this.settings.dropdown.caseSensitive)&&i.push(o)}),i},getTagElmByValue(t){var i=this.getTagIndexByValue(t)[0];return this.getTagElms()[i]},flashTag(t){t&&(t.classList.add(this.settings.classNames.tagFlash),setTimeout(()=>{t.classList.remove(this.settings.classNames.tagFlash)},100))},isTagBlacklisted(t){return t=this.trim(t.toLowerCase()),this.settings.blacklist.filter(i=>(""+i).toLowerCase()==t).length},isTagWhitelisted(t){return!!this.getWhitelistItem(t)},getWhitelistItem(t,i,n){i=i||"value";var o,c=this.settings;return(n=n||c.whitelist).some(h=>{if(D("string"==typeof h?h:h[i]||h.value,t,c.dropdown.caseSensitive,c.trim))return o="string"==typeof h?{value:h}:h,!0}),o||"value"!=i||"value"==c.tagTextProp||(o=this.getWhitelistItem(t,c.tagTextProp,n)),o},validateTag(t){var i=this.settings,n="value"in t?"value":i.tagTextProp,o=this.trim(t[n]+"");return(t[n]+"").trim()?i.pattern&&i.pattern instanceof RegExp&&!i.pattern.test(o)?this.TEXTS.pattern:!i.duplicates&&this.isTagDuplicate(o,this.state.editing)?this.TEXTS.duplicate:this.isTagBlacklisted(o)||i.enforceWhitelist&&!this.isTagWhitelisted(o)?this.TEXTS.notAllowed:!i.validate||i.validate(t):this.TEXTS.empty},getInvalidTagAttrs(t,i){return{"aria-invalid":!0,class:`${t.class||""} ${this.settings.classNames.tagNotAllowed}`.trim(),title:i}},hasMaxTags(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly(t,i){var n=this.settings;document.activeElement.blur(),n[i||"readonly"]=t,this.DOM.scope[(t?"set":"remove")+"Attribute"](i||"readonly",!0),"mix"==n.mode&&(this.DOM.input.contentEditable=!t)},setDisabled(t){this.setReadonly(t,"disabled")},normalizeTags(t){var i=this.settings,n=i.whitelist,o=i.delimiters,c=i.mode,h=i.tagTextProp,p=[],m=!!n&&n[0]instanceof Object,C=t instanceof Array,g=y=>(y+"").split(o).filter(L=>L).map(L=>({[h]:this.trim(L),value:this.trim(L)}));if("number"==typeof t&&(t=t.toString()),"string"==typeof t){if(!t.trim())return[];t=g(t)}else C&&(t=[].concat(...t.map(y=>y.value?y:g(y))));return m&&(t.forEach(y=>{var L=p.map(Y=>Y.value),N=this.dropdown.filterListItems.call(this,y[h],{exact:!0});this.settings.duplicates||(N=N.filter(Y=>!L.includes(Y.value)));var F=N.length>1?this.getWhitelistItem(y[h],h,N):N[0];F&&F instanceof Object?p.push(F):"mix"!=c&&(null==y.value&&(y.value=y[h]),p.push(y))}),t=p),t},parseMixTags(t){var i=this.settings,n=i.mixTagsInterpolator,o=i.duplicates,c=i.transformTag,h=i.enforceWhitelist,p=i.maxTags,m=i.tagTextProp,C=[];return t=t.split(n[0]).map((g,y)=>{var L,N,F,Y=g.split(n[1]),U=Y[0],G=C.length==p;try{if(U==+U)throw Error;N=JSON.parse(U)}catch(nt){N=this.normalizeTags(U)[0]||{value:U}}if(G||!(Y.length>1)||h&&!this.isTagWhitelisted(N.value)||!o&&this.isTagDuplicate(N.value)){if(g)return y?n[0]+g:g}else c.call(this,N),N[L=N[m]?m:"value"]=this.trim(N[L]),F=this.createTagElem(N),C.push(N),F.classList.add(this.settings.classNames.tagNoAnimation),Y[0]=F.outerHTML,this.value.push(N);return Y.join("")}).join(""),this.DOM.input.innerHTML=t,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize(),this.getTagElms().forEach((g,y)=>this.tagData(g,C[y])),this.update({withoutChangeEvent:!0}),t},replaceTextWithNode(t,i){if(this.state.tag||i){i=i||this.state.tag.prefix+this.state.tag.value;var n,o,c=window.getSelection(),h=c.anchorNode;return h.splitText(c.anchorOffset-(this.state.tag.delimiters?this.state.tag.delimiters.length:0)),n=h.nodeValue.lastIndexOf(i),o=h.splitText(n),t&&h.parentNode.replaceChild(t,o),!0}},selectTag(t,i){var n=this.settings;if(!n.enforceWhitelist||this.isTagWhitelisted(i.value)){this.input.set.call(this,i[n.tagTextProp||"value"],!0),this.state.actions.selectOption&&setTimeout(this.setRangeAtStartEnd.bind(this));var o=this.getLastTag();return o?this.replaceTag(o,i):this.appendTag(t),n.enforceWhitelist&&this.DOM.input.removeAttribute("contenteditable"),this.value[0]=i,this.trigger("add",{tag:t,data:i}),this.update(),[t]}},addEmptyTag(t){var i=P({value:""},t||{}),n=this.createTagElem(i);this.tagData(n,i),this.appendTag(n),this.editTag(n,{skipValidation:!0})},addTags(t,i,n=this.settings.skipInvalid){var o=[],c=this.settings,h=document.createDocumentFragment();return t&&0!=t.length?(t=this.normalizeTags(t),"mix"==c.mode?this.addMixTags(t):("select"==c.mode&&(i=!1),this.DOM.input.removeAttribute("style"),t.forEach(p=>{var m,C={},g=Object.assign({},p,{value:p.value+""});if((p=Object.assign({},g)).__isValid=this.hasMaxTags()||this.validateTag(p),c.transformTag.call(this,p),!0!==p.__isValid){if(n)return;P(C,this.getInvalidTagAttrs(p,p.__isValid),{__preInvalidData:g}),p.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(p.value))}if(p.readonly&&(C["aria-readonly"]=!0),m=this.createTagElem(p,C),o.push(m),"select"==c.mode)return this.selectTag(m,p);h.appendChild(m),p.__isValid&&!0===p.__isValid?(this.value.push(p),this.trigger("add",{tag:m,index:this.value.length-1,data:p})):(this.trigger("invalid",{data:p,index:this.value.length,tag:m,message:p.__isValid}),c.keepInvalidTags||setTimeout(()=>this.removeTags(m,!0),1e3)),this.dropdown.position()}),this.appendTag(h),this.update(),t.length&&i&&this.input.set.call(this),this.dropdown.refilter(),o)):("select"==c.mode&&this.removeAllTags(),o)},addMixTags(t){if((t=this.normalizeTags(t))[0].prefix||this.state.tag)return this.prefixedTextToTag(t[0]);"string"==typeof t&&(t=[{value:t}]);var i=!!this.state.selection,n=document.createDocumentFragment();return t.forEach(o=>{var c=this.createTagElem(o);n.appendChild(c),this.insertAfterTag(c)}),i?this.injectAtCaret(n):(this.DOM.input.focus(),(i=this.setStateSelection()).range.setStart(this.DOM.input,i.range.endOffset),i.range.setEnd(this.DOM.input,i.range.endOffset),this.DOM.input.appendChild(n),this.updateValueByDOMTags(),this.update()),n},prefixedTextToTag(t){var i,n=this.settings,o=this.state.tag.delimiters;if(n.transformTag.call(this,t),t.prefix=t.prefix||this.state.tag?this.state.tag.prefix:(n.pattern.source||n.pattern)[0],i=this.createTagElem(t),this.replaceTextWithNode(i)||this.DOM.input.appendChild(i),setTimeout(()=>i.classList.add(this.settings.classNames.tagNoAnimation),300),this.value.push(t),this.update(),!o){var c=this.insertAfterTag(i)||i;this.placeCaretAfterNode(c)}return this.state.tag=null,this.trigger("add",P({},{tag:i},{data:t})),i},appendTag(t){var i=this.DOM,n=i.scope.lastElementChild;n===i.input?i.scope.insertBefore(t,n):i.scope.appendChild(t)},createTagElem(t,i){t.__tagId=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,c=>(c^crypto.getRandomValues(new Uint8Array(1))[0]&15>>c/4).toString(16));var n,o=P({},t,e({value:z(t.value+"")},i));return function(c){for(var h,p=document.createNodeIterator(c,NodeFilter.SHOW_TEXT,null,!1);h=p.nextNode();)h.textContent.trim()||h.parentNode.removeChild(h)}(n=this.parseTemplate("tag",[o])),this.tagData(n,t),n},reCheckInvalidTags(){this.getTagElms(this.settings.classNames.tagNotAllowed).forEach((i,n)=>{var o=this.tagData(i),c=this.hasMaxTags(),h=this.validateTag(o);if(!0===h&&!c)return this.replaceTag(i,o=o.__preInvalidData?o.__preInvalidData:{value:o.value});i.title=c||h})},removeTags(t,i,n){var o;t=t&&t instanceof HTMLElement?[t]:t instanceof Array?t:t?[t]:[this.getLastTag()],o=t.reduce((c,h)=>(h&&"string"==typeof h&&(h=this.getTagElmByValue(h)),h&&this.tagData(h)&&c.push({node:h,idx:this.getTagIdx(this.tagData(h)),data:this.tagData(h,{__removed:!0})}),c),[]),n="number"==typeof n?n:this.CSSVars.tagHideTransition,"select"==this.settings.mode&&(n=0,this.input.set.call(this)),1==o.length&&o[0].node.classList.contains(this.settings.classNames.tagNotAllowed)&&(i=!0),o.length&&this.settings.hooks.beforeRemoveTag(o,{tagify:this}).then(()=>{function c(h){h.node.parentNode&&(h.node.parentNode.removeChild(h.node),i?this.settings.keepInvalidTags&&this.trigger("remove",{tag:h.node,index:h.idx}):(this.trigger("remove",{tag:h.node,index:h.idx,data:h.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()))}n&&n>10&&1==o.length?function(h){h.node.style.width=parseFloat(window.getComputedStyle(h.node).width)+"px",document,h.node.classList.add(this.settings.classNames.tagHide),setTimeout(c.bind(this),n,h)}.call(this,o[0]):o.forEach(c.bind(this)),i||(this.removeTagsFromValue(o.map(h=>h.node)),this.update(),"select"==this.settings.mode&&this.DOM.input.setAttribute("contenteditable",!0))}).catch(c=>{})},removeTagsFromDOM(){[].slice.call(this.getTagElms()).forEach(t=>t.parentNode.removeChild(t))},removeTagsFromValue(t){(t=Array.isArray(t)?t:[t]).forEach(i=>{var n=this.tagData(i),o=this.getTagIdx(n);o>-1&&this.value.splice(o,1)})},removeAllTags(t){t=t||{},this.value=[],"mix"==this.settings.mode?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.position(),"select"==this.settings.mode&&this.input.set.call(this),this.update(t)},postUpdate(){var t=this.settings.classNames,i="mix"==this.settings.mode?this.settings.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value:this.value.length;this.toggleClass(t.hasMaxTags,this.value.length>=this.settings.maxTags),this.toggleClass(t.hasNoTags,!this.value.length),this.toggleClass(t.empty,!i)},update(t){this.settings.mixMode.integrated||(this.DOM.originalInput.value=this.getInputValue()),this.postUpdate(),!(t||{}).withoutChangeEvent&&this.state.loadedOriginalValues&&this.triggerChangeEvent()},getInputValue(){var t=this.getCleanValue();return"mix"==this.settings.mode?this.getMixedTagsAsString(t):t.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(t):JSON.stringify(t):""},getCleanValue(t){return n=this.dataProps,(i=t||this.value)&&Array.isArray(i)&&i.map(o=>E(o,n));var i,n},getMixedTagsAsString(){var t="",i=this,n=this.settings.mixTagsInterpolator;return this.DOM.input.childNodes.forEach(o=>{if(1==o.nodeType){const c=i.tagData(o);if(o.classList.contains(i.settings.classNames.tag)&&c)return c.__removed?void 0:void(t+=n[0]+JSON.stringify(E(c,i.dataProps))+n[1]);"BR"!=o.tagName||o.parentNode!=i.DOM.input&&1!=o.parentNode.childNodes.length?"DIV"!=o.tagName&&"P"!=o.tagName||(t+="\r\n",!o.children.length&&o.textContent&&(t+=o.textContent)):t+="\r\n"}else t+=o.textContent}),t}}).removeTag=J.prototype.removeTags,J}()},904:(ot,K,f)=>{"use strict";f.d(K,{iJ:()=>h,qT:()=>p});var e=f(5278),D=f.n(e),E=f(7716),a=f(8583),j=f(3679),z=f(9765),q=f(6215),P=f(6682),$=f(2759),W=f(3637),A=f(7393);const H={leading:!0,trailing:!1};class B{constructor(C,g,y,L){this.duration=C,this.scheduler=g,this.leading=y,this.trailing=L}call(C,g){return g.subscribe(new J(C,this.duration,this.scheduler,this.leading,this.trailing))}}class J extends A.L{constructor(C,g,y,L,N){super(C),this.duration=g,this.scheduler=y,this.leading=L,this.trailing=N,this._hasTrailingValue=!1,this._trailingValue=null}_next(C){this.throttled?this.trailing&&(this._trailingValue=C,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(t,this.duration,{subscriber:this})),this.leading?this.destination.next(C):this.trailing&&(this._trailingValue=C,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const C=this.throttled;C&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),C.unsubscribe(),this.remove(C),this.throttled=null)}}function t(m){const{subscriber:C}=m;C.clearThrottle()}var i=f(6782);const n=["inputRef"],o=["*"];let c=(()=>{class m{constructor(){this.tagifyMap=new Map}add(g,y){this.tagifyMap.get(g)?console.warn(`There already exists a tagify instance with name ${g}!`):this.tagifyMap.set(g,y)}get(g){return this.tagifyMap.get(g)}remove(g){this.tagifyMap.delete(g)}}return m.\u0275fac=function(g){return new(g||m)},m.\u0275prov=(0,E.Yz7)({factory:function(){return new m},token:m,providedIn:"root"}),m})(),h=(()=>{class m{constructor(g,y){this.tagifyService=g,this.element=y,this.valueType="undefined",this.onChange=Function.prototype,this.onTouched=Function.prototype,this.unsubscribe$=new z.xQ,this.value$=new q.X(null),this.skip=!1,this.inputClassValue="",this.readonlyValue=!1,this.settings={},this.name="",this.add=new E.vpe,this.remove=new E.vpe,this.tInput=new E.vpe}set inputClass(g){this.setTagsClass(g),this.inputClassValue=g}set readonly(g){this.readonlyValue=!!g,this.setReadonly()}get value(){return this.valueData}set value(g){g!==this.valueData&&(this.valueData=g,this.onChange(g))}ngAfterViewInit(){this.settings.callbacks=this.settings.callbacks||{},this.settings.callbacks.hasOwnProperty("add")||(this.settings.callbacks.add=()=>this.add.emit({tags:this.tagify.value,added:this.tagify.value[this.tagify.value.length-1]})),this.settings.callbacks.hasOwnProperty("remove")||(this.settings.callbacks.remove=()=>this.remove.emit(this.tagify.value));const g=this.element.nativeElement.textContent;this.tagify=new(D())(this.inputRef.nativeElement,this.settings),this.name.length&&this.tagifyService.add(this.name,this.tagify),this.setReadonly(),g.length&&(this.tagify.loadOriginalValues(g),this.skip=!0,setTimeout(()=>{this.setValue()})),this.value$.pipe((0,i.R)(this.unsubscribe$)).subscribe(y=>{if(y){if(this.skip)return void(this.skip=!1);if("undefined"===this.valueType&&(this.valueType=typeof y),"string"==typeof y)return this.tagify.loadOriginalValues(y),void setTimeout(()=>{this.setValue()});this.tagify.addTags(y,!1,!0),this.tagify.value.forEach(L=>{if(!y.find(N=>N.value===L.value)){const N=this.tagify.getTagElms().find(F=>F.attributes.getNamedItem("value").textContent===L.value);this.tagify.removeTags(N)}})}}),this.tagify.on("input",y=>{this.tInput.emit(y.detail.value),"string"===this.valueType&&"mix"===this.tagify.settings.mode&&(this.value=this.tagify.getMixedTagsAsString())}),(0,P.T)((0,$.R)(this.tagify,"add"),(0,$.R)(this.tagify,"remove")).pipe(function(m,C=W.P,g=H){return y=>y.lift(new B(m,C,g.leading,g.trailing))}(0,W.z,{leading:!1,trailing:!0}),(0,i.R)(this.unsubscribe$)).subscribe(()=>{this.setValue()}),this.whitelist&&this.whitelist.pipe((0,i.R)(this.unsubscribe$)).subscribe(y=>{this.tagify.settings.whitelist=y})}writeValue(g){this.value$.next(g)}registerOnChange(g){this.onChange=g}registerOnTouched(g){this.onTouched=g}setValue(){this.value="string"===this.valueType?this.tagify.DOM.originalInput.value:this.tagify.value.slice()}setTagsClass(g){const y=this.element.nativeElement.querySelector("tags");y&&(y.classList.remove(...this.inputClassValue.split(/\s+/)),y.classList.add(...g.split(/\s+/)))}setReadonly(){this.tagify&&this.tagify.setReadonly(this.readonlyValue)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.tagify.destroy(),this.name.length&&this.tagifyService.remove(this.name)}}return m.\u0275fac=function(g){return new(g||m)(E.Y36(c),E.Y36(E.SBq))},m.\u0275cmp=E.Xpm({type:m,selectors:[["tagify"]],viewQuery:function(g,y){if(1&g&&E.Gf(n,7),2&g){let L;E.iGM(L=E.CRH())&&(y.inputRef=L.first)}},inputs:{settings:"settings",name:"name",inputClass:"inputClass",readonly:"readonly",whitelist:"whitelist"},outputs:{add:"add",remove:"remove",tInput:"tInput"},features:[E._Bn([{provide:j.JU,useExisting:(0,E.Gpc)(()=>m),multi:!0}])],ngContentSelectors:o,decls:4,vars:1,consts:[[3,"ngClass"],["inputRef",""],[2,"display","none"]],template:function(g,y){1&g&&(E.F$t(),E._UZ(0,"input",0,1),E.TgZ(2,"span",2),E.Hsn(3),E.qZA()),2&g&&E.Q6J("ngClass",y.inputClassValue)},directives:[a.mk],encapsulation:2}),m})(),p=(()=>{class m{static forRoot(){return{ngModule:m,providers:[c]}}}return m.\u0275fac=function(g){return new(g||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({providers:[c],imports:[[a.ez]]}),m})()},5510:(ot,K,f)=>{"use strict";f.r(K),f.d(K,{CharactersModule:()=>rt});var e=f(8583),D=f(6983),E=f(8254),a=f(7716),j=f(4463),z=f(8205),q=f(6150),P=f(6214),$=f(6256),W=f(9344),A=f(7871),H=f(1095),X=f(6627),Z=f(6215),Q=f(625),I=f(2238),B=f(294);let J=(()=>{class w{constructor(){}size(){let _=window,O=document,R=O.documentElement,it=O.getElementsByTagName("body")[0];return{x:_.innerWidth||R.clientWidth||it.clientWidth,y:_.innerHeight||R.clientHeight||it.clientHeight}}}return w.\u0275fac=function(_){return new(_||w)},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:B.I}),w})();const t=["template"],i=["dialogElement"],n=["headerElement"],o=["footerElement"];function c(w,V){1&w&&(a.TgZ(0,"span",11),a.Hsn(1),a.qZA())}function h(w,V){1&w&&(a.TgZ(0,"span"),a.Hsn(1,1),a.qZA())}function p(w,V){1&w&&(a.TgZ(0,"span"),a.Hsn(1,2),a.qZA())}const m=function(w,V){return{"overlay-header":w,"hidden-header":V}},C=function(w){return{"hide-body-padding":w}},g=function(w,V){return{"overlay-footer":w,"hidden-footer":V}};function y(w,V){if(1&w&&(a.TgZ(0,"div",2,3),a.TgZ(2,"div",4,5),a.YNc(4,c,2,0,"span",6),a.ALo(5,"async"),a.qZA(),a.TgZ(6,"div",7),a.YNc(7,h,2,0,"span",8),a.ALo(8,"async"),a.qZA(),a.TgZ(9,"div",9,10),a.YNc(11,p,2,0,"span",8),a.ALo(12,"async"),a.qZA(),a.qZA()),2&w){const _=a.oxw();a.xp6(2),a.Q6J("ngClass",a.WLB(13,m,_.config.overlayHeader,!_.config.header)),a.xp6(2),a.Q6J("ngIf",a.lcZ(5,7,_.config.header&&_.status)),a.xp6(2),a.Q6J("ngClass",a.VKq(16,C,!_.config.padding))("ngStyle",_.getBodyStyle()),a.xp6(1),a.Q6J("ngIf",a.lcZ(8,9,_.status)),a.xp6(2),a.Q6J("ngClass",a.WLB(18,g,_.config.overlayFooter,!_.config.footer)),a.xp6(2),a.Q6J("ngIf",a.lcZ(12,11,_.config.footer&&_.status))}}const L=[[["","header",""]],[["","body",""]],[["","footer",""]]],N=["[header]","[body]","[footer]"];let F=(()=>{class w{constructor(_,O,R){this.overlay=_,this.dialog=O,this.screen=R,this.status=new Z.X(!1),this.config={width:"auto",height:"auto",footer:!0,header:!0,padding:!0,overlayFooter:!1,overlayHeader:!1,fullScreen:!1},this.modalClass="dialog-lg dialog-info",this.showCloseIcon=!0,this.onHide=new a.vpe}set onConfig(_){Object.assign(this.config,_)}set onWidth(_){this.config.width=_}set onHeight(_){this.config.height=_}ngOnInit(){}ngAfterViewInit(){}show(){this.status.next(!0),this.modalRef=this.dialog.open(this.template,{scrollStrategy:this.overlay.scrollStrategies.noop(),disableClose:!0,width:this.config.width,height:this.config.height,panelClass:"full-width-dialog"}),document.body.style.overflow="hidden",this.modalRef.keydownEvents().subscribe(_=>{27===_.keyCode&&this.modalRef.close()})}hide(){document.body.style.overflow="visible",setTimeout(()=>{this.status.next(!1)},300),this.modalRef.close(),this.onHide.emit(!1)}getBodyStyle(){let _=0;return this.config.overlayFooter||(_+=this.footerElement.nativeElement.getBoundingClientRect().height),this.config.overlayHeader||(_+=this.headerElement.nativeElement.getBoundingClientRect().height),this.config.fullScreen?{height:"calc(100vh - "+_+"px)",width:"100vw"}:{"max-height":"calc(100vh - "+_+"px)","max-width":"100vw"}}onResize(_){let O=this.screen.size();_.newHeight>=O.y&&_.newWidth>=O.x?this.dialogElement.nativeElement.parentNode.classList.add("remove-border-dialog"):this.dialogElement.nativeElement.parentNode.classList.remove("remove-border-dialog")}}return w.\u0275fac=function(_){return new(_||w)(a.Y36(Q.aV),a.Y36(I.uw),a.Y36(J))},w.\u0275cmp=a.Xpm({type:w,selectors:[["app-dialog"]],viewQuery:function(_,O){if(1&_&&(a.Gf(t,5),a.Gf(i,5),a.Gf(n,5),a.Gf(o,5)),2&_){let R;a.iGM(R=a.CRH())&&(O.template=R.first),a.iGM(R=a.CRH())&&(O.dialogElement=R.first),a.iGM(R=a.CRH())&&(O.headerElement=R.first),a.iGM(R=a.CRH())&&(O.footerElement=R.first)}},inputs:{onConfig:["config","onConfig"],modalClass:"modalClass",showCloseIcon:"showCloseIcon",onWidth:["width","onWidth"],onHeight:["height","onHeight"]},outputs:{onHide:"onHide"},ngContentSelectors:N,decls:3,vars:0,consts:[["mat-dialog-content",""],["template",""],[1,"position-relative","h-100"],["dialogElement",""],[1,"modal-header","title","border_bottom",3,"ngClass"],["headerElement",""],["class","w-100",4,"ngIf"],[1,"modal-body","custom-scrollbar","transition",3,"ngClass","ngStyle"],[4,"ngIf"],[1,"modal-footer","d-block","border_top",3,"ngClass"],["footerElement",""],[1,"w-100"]],template:function(_,O){1&_&&(a.F$t(L),a.TgZ(0,"div",0),a.YNc(1,y,13,21,"ng-template",null,1,a.W1O),a.qZA())},directives:[I.xY,e.mk,e.O5,e.PC],pipes:[e.Ov],styles:[".cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:1!important}  .cdk-overlay-dark-backdrop{background:rgba(0,0,0,.6)}  .full-width-dialog{max-width:100vw!important}  .full-width-dialog .remove-border-dialog{border-radius:0}.modal-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{float:right;line-height:40px}.modal-body[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}.overlay-header[_ngcontent-%COMP%], .overlay-footer[_ngcontent-%COMP%]{position:absolute;z-index:2!important;width:100%;border:none;background-color:red}.overlay-header[_ngcontent-%COMP%]{top:0;background:linear-gradient(360deg,transparent,rgba(0,0,0,.75),rgba(0,0,0,.75))}.overlay-footer[_ngcontent-%COMP%]{bottom:0;background:linear-gradient(180deg,transparent,rgba(0,0,0,.75),rgba(0,0,0,.75))}.hidden-footer[_ngcontent-%COMP%], .hidden-header[_ngcontent-%COMP%], .hide-body-padding[_ngcontent-%COMP%]{padding:0!important}"]}),w})();const Y=["dialog"];let U=(()=>{class w{constructor(_){this.toast=_,this.title="Would you like to delete",this.discardButtonColor="primary",this.confirmButtonColor="primary",this.statusChange=new a.vpe,this.onConfirm=new a.vpe,this.dialogConfig={padding:!1}}set onStatus(_){_&&this.dialog.show()}ngOnInit(){}onHide(){this.statusChange.emit(!1)}onClickConfirm(){this.onConfirm.emit(!0)}}return w.\u0275fac=function(_){return new(_||w)(a.Y36(W._W))},w.\u0275cmp=a.Xpm({type:w,selectors:[["app-confirm-dialog"]],viewQuery:function(_,O){if(1&_&&a.Gf(Y,7),2&_){let R;a.iGM(R=a.CRH())&&(O.dialog=R.first)}},inputs:{title:"title",message:"message",discardButtonColor:"discardButtonColor",confirmButtonColor:"confirmButtonColor",onStatus:["status","onStatus"]},outputs:{statusChange:"statusChange",onConfirm:"onConfirm"},decls:15,vars:4,consts:[[3,"config","onHide"],["dialog",""],["header","",1,"title"],["body",""],["footer",""],["mat-stroked-button","",1,"button",3,"color","click"],["mat-flat-button","",1,"button","confirm-button",3,"color","click"]],template:function(_,O){if(1&_){const R=a.EpF();a.TgZ(0,"app-dialog",0,1),a.NdJ("onHide",function(){return O.onHide()}),a.TgZ(2,"div",2),a.TgZ(3,"strong"),a._uU(4),a.qZA(),a.qZA(),a._UZ(5,"div",3),a.TgZ(6,"div",4),a.TgZ(7,"button",5),a.NdJ("click",function(){return a.CHM(R),a.MAs(1).hide()}),a.TgZ(8,"mat-icon"),a._uU(9,"cancel"),a.qZA(),a._uU(10," Discard "),a.qZA(),a.TgZ(11,"button",6),a.NdJ("click",function(){return O.onClickConfirm()}),a.TgZ(12,"mat-icon"),a._uU(13,"check"),a.qZA(),a._uU(14," Confirm "),a.qZA(),a.qZA(),a.qZA()}2&_&&(a.Q6J("config",O.dialogConfig),a.xp6(4),a.Oqu(O.title),a.xp6(3),a.Q6J("color",O.discardButtonColor),a.xp6(4),a.Q6J("color",O.confirmButtonColor))},directives:[F,H.lW,X.Hw],styles:[".confirm-button[_ngcontent-%COMP%]{margin-left:10px}.title[_ngcontent-%COMP%]{padding-bottom:10px}"]}),w})();const G=["dialog"];function nt(w,V){if(1&w){const _=a.EpF();a.TgZ(0,"span",11),a.TgZ(1,"button",12),a.NdJ("click",function(){a.CHM(_);const R=a.oxw(),it=a.MAs(14);return R.onClickDeleteCharacter(),it.dialog.show()}),a.TgZ(2,"mat-icon"),a._uU(3,"delete"),a.qZA(),a.qZA(),a.TgZ(4,"button",5),a.NdJ("click",function(){return a.CHM(_),a.oxw().onClickEditCharacter()}),a.TgZ(5,"mat-icon"),a._uU(6,"edit"),a.qZA(),a.qZA(),a.TgZ(7,"button",5),a.NdJ("click",function(){return a.CHM(_),a.oxw().onClickVisibleCharacter()}),a.TgZ(8,"mat-icon"),a._uU(9,"visibility"),a.qZA(),a.qZA(),a.qZA()}}let ht=(()=>{class w{constructor(_,O){this.toastr=_,this.store=O,this.direction=$.o.view,this.displayActions=!0,this.statusChange=new a.vpe,this.onEdit=new a.vpe,this.dialogConfig={padding:!1},this.CharacterDirections=$.o}set onStatus(_){_&&this.dialog.show()}ngOnInit(){}onHide(){this.statusChange.emit(!1)}isEdit(){return this.direction===$.o.edit}isView(){return this.direction===$.o.view}onEditCharacter(){this.store.dispatch((0,P.Ag)({character:this.character})),this.onEdit.emit(this.character)}onClickDeleteCharacter(){}onClickEditCharacter(){this.direction=$.o.edit}onClickVisibleCharacter(){}onConfirmDelete(){this.store.dispatch((0,P.rQ)({id:this.character.id})),this.toastr.success(this.character.name+" deleted successfully","",{closeButton:!0,timeOut:3e3,positionClass:"toast-bottom-right"})}}return w.\u0275fac=function(_){return new(_||w)(a.Y36(W._W),a.Y36(j.yh))},w.\u0275cmp=a.Xpm({type:w,selectors:[["app-character-dialog"]],viewQuery:function(_,O){if(1&_&&a.Gf(G,7),2&_){let R;a.iGM(R=a.CRH())&&(O.dialog=R.first)}},inputs:{direction:"direction",character:"character",displayActions:"displayActions",onStatus:["status","onStatus"]},outputs:{statusChange:"statusChange",onEdit:"onEdit"},decls:15,vars:6,consts:[[3,"config","onHide"],["dialog",""],["header","",1,"title"],[1,"buttons"],["class","actions",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["body",""],[3,"character","direction","onUpdated"],["footer",""],["confirmButtonColor","warn",3,"title","onConfirm"],["confirmDelete",""],[1,"actions"],["mat-icon-button","","color","warn",3,"click"]],template:function(_,O){if(1&_){const R=a.EpF();a.TgZ(0,"app-dialog",0,1),a.NdJ("onHide",function(){return O.onHide()}),a.TgZ(2,"div",2),a.TgZ(3,"strong"),a._uU(4),a.qZA(),a.TgZ(5,"div",3),a.YNc(6,nt,10,0,"span",4),a.TgZ(7,"button",5),a.NdJ("click",function(){return a.CHM(R),a.MAs(1).hide()}),a.TgZ(8,"mat-icon"),a._uU(9,"close"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"div",6),a.TgZ(11,"app-viewtify-character",7),a.NdJ("onUpdated",function(){return a.CHM(R),a.MAs(1).hide()}),a.qZA(),a.qZA(),a._UZ(12,"div",8),a.qZA(),a.TgZ(13,"app-confirm-dialog",9,10),a.NdJ("onConfirm",function(){a.CHM(R);const at=a.MAs(1),lt=a.MAs(14);return at.hide(),lt.dialog.hide(),O.onConfirmDelete()}),a.qZA()}2&_&&(a.Q6J("config",O.dialogConfig),a.xp6(4),a.Oqu(O.character.name),a.xp6(2),a.Q6J("ngIf",O.displayActions),a.xp6(5),a.Q6J("character",O.character)("direction",O.direction),a.xp6(2),a.Q6J("title","Would you like to delete "+O.character.name+"?"))},directives:[F,e.O5,H.lW,X.Hw,$.S,U],styles:[".title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer}.title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:16px}.title[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{position:relative;top:-10px;right:-10px}"]}),w})(),T=(()=>{class w{constructor(_,O){this.toastr=_,this.store=O,this.character=new q.f,this.onCharacter=new a.vpe,this.loadedAvatar=!1,this.displayActions=!1,this.characterDirection=$.o.edit,this.characterDirections=$.o}ngOnInit(){}onClickCharacter(){this.onCharacter.emit(this.character),this.displayActions=!0}onDeleteCharacter(_){_.stopPropagation()}onEditCharacter(_){_.stopPropagation(),this.displayActions=!1}onConfirmDelete(){this.store.dispatch((0,P.rQ)({id:this.character.id})),this.toastr.success(this.character.name+" deleted successfully","",{closeButton:!0,timeOut:3e3,positionClass:"toast-bottom-right"})}}return w.\u0275fac=function(_){return new(_||w)(a.Y36(W._W),a.Y36(j.yh))},w.\u0275cmp=a.Xpm({type:w,selectors:[["app-character"]],inputs:{character:"character"},outputs:{onCharacter:"onCharacter"},decls:19,vars:7,consts:[[1,"character-content",3,"click"],[3,"src"],[1,"details"],[1,"name"],[1,"role"],[1,"actions"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["confirmButtonColor","warn",3,"title","onConfirm"],["confirmDelete",""],[3,"character","displayActions","direction"],["characterProfile",""]],template:function(_,O){if(1&_){const R=a.EpF();a.TgZ(0,"div",0),a.NdJ("click",function(){a.CHM(R);const at=a.MAs(18);return O.onClickCharacter(),at.dialog.show()}),a._UZ(1,"app-avatar",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"strong"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"div",4),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"div",5),a.TgZ(9,"button",6),a.NdJ("click",function(at){a.CHM(R);const lt=a.MAs(18);return O.onEditCharacter(at),lt.dialog.show()}),a.TgZ(10,"mat-icon"),a._uU(11,"edit"),a.qZA(),a.qZA(),a.TgZ(12,"button",7),a.NdJ("click",function(at){a.CHM(R);const lt=a.MAs(16);return O.onDeleteCharacter(at),lt.dialog.show()}),a.TgZ(13,"mat-icon"),a._uU(14,"delete"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(15,"app-confirm-dialog",8,9),a.NdJ("onConfirm",function(){return a.CHM(R),a.MAs(16).dialog.hide(),O.onConfirmDelete()}),a.qZA(),a._UZ(17,"app-character-dialog",10,11)}2&_&&(a.xp6(1),a.s9C("src",O.character.avatar),a.xp6(4),a.Oqu(O.character.name),a.xp6(2),a.Oqu(O.character.role),a.xp6(8),a.Q6J("title","Would you like to delete "+O.character.name+"?"),a.xp6(2),a.Q6J("character",O.character)("displayActions",O.displayActions)("direction",O.characterDirection))},directives:[A.A,H.lW,X.Hw,U,ht],styles:[".character-content[_ngcontent-%COMP%]{width:100px;padding:10px;border:1px solid #eee;border-radius:5px}.character-content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px}.character-content[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%], .character-content[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}@media screen and (max-width: 576px){.character-content[_ngcontent-%COMP%]{width:auto;display:flex;align-items:center}.character-content[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{text-align:left;padding:0 10px}.character-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-left:auto;display:grid}}"]}),w})();function S(w,V){if(1&w&&(a.TgZ(0,"div",2),a._UZ(1,"app-character",3),a.qZA()),2&w){const _=V.$implicit;a.xp6(1),a.Q6J("character",_)}}const u=[{path:"",component:(()=>{class w{constructor(_){this.store=_,this.characters=[],this.store.select(E.kF).subscribe(O=>{O&&(this.characters=O)})}ngOnInit(){}trackByFnCharacters(_,O){return _}}return w.\u0275fac=function(_){return new(_||w)(a.Y36(j.yh))},w.\u0275cmp=a.Xpm({type:w,selectors:[["app-characters"]],decls:3,vars:2,consts:[[1,"characters"],["class","character",4,"ngFor","ngForOf","ngForTrackBy"],[1,"character"],[3,"character"]],template:function(_,O){1&_&&(a._UZ(0,"app-direction"),a.TgZ(1,"div",0),a.YNc(2,S,2,1,"div",1),a.qZA()),2&_&&(a.xp6(2),a.Q6J("ngForOf",O.characters)("ngForTrackBy",O.trackByFnCharacters))},directives:[z.y,e.sg,T],styles:[".characters[_ngcontent-%COMP%]{text-align:center}.characters[_ngcontent-%COMP%]   .character[_ngcontent-%COMP%]{text-align:center;margin:10px;display:inline-block;border-radius:5px}.characters[_ngcontent-%COMP%]   .character[_ngcontent-%COMP%]:hover{transition:.3s;transform:translateY(-3px);box-shadow:0 0 10px 5px #eee;-webkit-box-shadow:0px 0px 10px 5px #eeeeee;-moz-box-shadow:0px 0px 10px 5px #eeeeee}@media screen and (max-width: 576px){.characters[_ngcontent-%COMP%]   .character[_ngcontent-%COMP%]{margin:10px 0 20px;display:block}}"],changeDetection:0}),w})()}];let b=(()=>{class w{}return w.\u0275fac=function(_){return new(_||w)},w.\u0275mod=a.oAB({type:w}),w.\u0275inj=a.cJS({imports:[[D.Bz.forChild(u)],D.Bz]}),w})();var x=f(3261),M=f(7622),tt=f(2991),et=f(9750),st=f(904);let rt=(()=>{class w{}return w.\u0275fac=function(_){return new(_||w)},w.\u0275mod=a.oAB({type:w}),w.\u0275inj=a.cJS({imports:[[e.ez,b,x.q,M.S,tt.m,et.V,st.qT.forRoot()]]}),w})()},6256:(ot,K,f)=>{"use strict";f.d(K,{o:()=>ct,S:()=>Rt});var e=f(7716),D=f(6215),E=f(6150),a=f(3679);class j{isErrorState(l,s){return!!(l&&l.invalid&&s&&s.submitted)}}class P{constructor(){this.text="Submit",this.color="primary",this.loading=!1,this.disabled=!1,this.status=new D.X(!1)}}var W=(()=>{return(d=W||(W={})).input="[INPUT] input field",d.textarea="[textarea] textarea field",d.select="[SELECT] select field",d.radio="[RADIO] radio field",d.checkbox="[CHECKBOX] checkbox field",d.toggle="[TOGGLE] toggle field",d.inputPhone="[RADIO] input phone field",W;var d})();class A extends class{get(l){return null}field(l){return null}group(l){return null}array(l){return null}}{constructor(l){super(),this.formControl=null,this.controlName=null,this.controlType=B.formField,this.fieldType=W.input,this.defaultValue=null,this.errorStateMatcher=new j,this.validators=[],this.options=null,this.appearance="legacy",this.useTranslation=!1,this.prefix=null,this.dropDownInPrefix=!1,this.type=null,this.label=null,this.placeholder=null,this.hint=null,this.autoComplete="on",this.icon=null,this.color="primary",this.multiple=!1,this.readOnly=!1,this.none=!1,this.hidden=!1,this.disabled=!1,this.submit=new P,Object.assign(this,l)}update(l){Object.assign(this,l)}field(l){return null}group(l){return null}array(l){return null}get(l){return null}}var H=f(9765),X=f(6782);class Z{constructor(){this.$unSubscribe=new H.xQ,this.formGroup=null}generateFormControls(l){const s={};for(const v of l)v instanceof A?Object.assign(s,{[v.controlName]:this.generateFormControl(v)}):v instanceof I?Object.assign(s,{[v.controlName]:this.generateFormGroup(v)}):v instanceof Q&&Object.assign(s,{[v.controlName]:this.generateFormArray(v)});return s}generateFormControl(l){const s=new a.NI(l.defaultValue,l.validators.map(v=>v.validator).filter(v=>v));return l.formControl=s,l.submit=this.submit,s}generateFormGroup(l){const s=new a.cw(this.generateFormControls(l.controls));return l.formGroup=s,l.submit=this.submit,l.change.pipe((0,X.R)(this.$unSubscribe)).subscribe(v=>{v&&this.formGroup.patchValue(v)}),s}generateFormArray(l){const s=new a.Oe(Object.entries(this.generateFormControls(l.controls)).map(([v,k])=>({name:v,value:k})).map(v=>v.value));return l.formArray=s,l.submit=this.submit,l.change.pipe((0,X.R)(this.$unSubscribe)).subscribe(v=>{v&&this.formGroup.patchValue(v)}),s}}class Q extends Z{constructor(l){super(),this.submit=new P,this.formArray=null,this.controlName="",this.controlType=B.formArray,this.controls=[],this.change=new D.X(null),this.label="",Object.assign(this,l)}get(l){for(const s of this.controls)if(l===s.controlName)return s;return null}field(l){const s=this.get(l);return s instanceof A?s:null}group(l){const s=this.get(l);return s instanceof I?s:null}array(l){const s=this.get(l);return s instanceof Q?s:null}removeAt(l){this.controls.splice(l,1),this.formArray.removeAt(l)}insertAt(l,s){s instanceof A?(this.controls.splice(l,0,s),this.formArray.insert(l,this.generateFormControl(s))):s instanceof I?(this.controls.splice(l,0,s),this.formArray.insert(l,this.generateFormGroup(s))):s instanceof Q&&(this.controls.splice(l,0,s),this.formArray.insert(l,this.generateFormArray(s)))}push(l){l instanceof A?(this.formArray.push(this.generateFormControl(l)),this.controls.push(l)):l instanceof I?(this.formArray.push(this.generateFormGroup(l)),this.controls.push(l)):l instanceof Q&&(this.formArray.push(this.generateFormArray(l)),this.controls.push(l))}unshift(l){l instanceof A?(this.formArray.insert(0,this.generateFormControl(l)),this.controls.unshift(l)):l instanceof I?(this.formArray.insert(0,this.generateFormGroup(l)),this.controls.unshift(l)):l instanceof Q&&(this.formArray.insert(0,this.generateFormArray(l)),this.controls.unshift(l))}reset(){this.formGroup.reset()}}class I extends Z{constructor(l){super(),this.controlName="",this.controlType=B.formGroup,this.controls=[],this.change=new D.X(null),this.label="",Object.assign(this,l)}get(l){for(const s of this.controls)if(l===s.controlName)return s;return null}field(l){const s=this.get(l);return s instanceof A?s:null}group(l){const s=this.get(l);return s instanceof I?s:null}array(l){const s=this.get(l);return s instanceof Q?s:null}addControl(l){l instanceof A?(this.controls.push(l),this.formGroup.addControl(l.controlName,this.generateFormControl(l))):l instanceof I?(this.controls.push(l),this.formGroup.addControl(l.controlName,this.generateFormGroup(l))):l instanceof Q&&(this.controls.push(l),this.formGroup.addControl(l.controlName,this.generateFormArray(l)))}removeControl(l){this.controls=this.controls.filter(s=>s.controlName!==l),this.formGroup.removeControl(l)}reset(){this.formGroup.reset()}}var B=(()=>{return(d=B||(B={})).formField="[FORMFIELD] formField direction",d.formGroup="[FORMGROUP] formGroup direction",d.formArray="[FORMARRAY] formArray direction",B;var d})();class J extends Z{constructor(l){super(),this.submit=new P,this.controls=l.controls,l.hasOwnProperty("submit")&&(this.submit=Object.assign(Object.assign({},this.submit),l.submit)),l.hasOwnProperty("options")&&(this.options=l.options),this.formGroup=new a.cw(this.generateFormControls(this.controls),this.options),this.formGroup.statusChanges.subscribe(s=>{this.checkDisabledSubmit()})}get(l){for(const s of this.controls)if(l===s.controlName)return s;return null}field(l){const s=this.get(l);return s instanceof A?s:null}group(l){const s=this.get(l);return s instanceof I?s:null}array(l){const s=this.get(l);return s instanceof Q?s:null}addControl(l){l instanceof A?(this.controls.push(l),this.formGroup.addControl(l.controlName,this.generateFormControl(l))):l instanceof I?(this.controls.push(l),this.formGroup.addControl(l.controlName,this.generateFormGroup(l))):l instanceof Q&&(this.controls.push(l),this.formGroup.addControl(l.controlName,this.generateFormArray(l)))}removeControl(l){this.controls=this.controls.filter(s=>s.controlName!==l),this.formGroup.removeControl(l)}checkDisabledSubmit(){this.submit.disabled=this.formGroup.invalid&&this.submit.status.value||this.submit.loading}loading(l){this.submit.loading=l,this.checkDisabledSubmit()}reset(){this.formGroup.reset()}unSubscribe(){this.$unSubscribe.next(),this.$unSubscribe.complete()}updateSubmit(l){Object.assign(this.submit,l)}updateFields(l){this.overwriteFields(l,this.controls)}overwriteFields(l,s){s.forEach(v=>{v instanceof A?Object.assign(v,l):this.overwriteFields(l,v.controls)})}}class t{constructor(l){this.validator=null,this.errorCode=null,this.description=null,this.translationCode=null,this.parameters=null,Object.assign(this,l)}}class i extends A{constructor(l={}){const s=new A({controlName:"name",label:"Enter first name",placeholder:"first name",autoComplete:"off",validators:[new t({validator:a.kI.required,errorCode:"required",description:"Name is required"}),new t({validator:a.kI.minLength(3),errorCode:"minlength",description:"Minimum 3 characters required",parameters:{value:3}})]});super(Object.assign(s,l))}}class n extends A{constructor(l={}){const s=new A({controlName:"role",fieldType:W.select,label:"Choose role",placeholder:"role",autoComplete:"off",defaultValue:"underwater",options:[{text:"Underwater Archaeologist",value:"underwater"},{text:"Good Samaritan",value:"good samaritan"},{text:"Fastest",value:"fastest"},{text:"Sniper expert",value:"sniper expert"},{text:"Runing hard",value:"runing hard"},{text:"Rugged Outdoorsman",value:"rugged outdoorsman"}],validators:[new t({validator:a.kI.required,errorCode:"required",description:"role is required"})]});super(Object.assign(s,l))}}class o extends A{constructor(l={}){const s=new A({controlName:"description",fieldType:W.textarea,label:"Enter role description",placeholder:"description",autoComplete:"off",validators:[new t({validator:a.kI.required,errorCode:"required",description:"description is required"})]});super(Object.assign(s,l))}}class c extends A{constructor(l={}){const s=new A({controlName:"age",label:"Enter age",placeholder:"age",autoComplete:"off",type:"number",validators:[new t({validator:a.kI.required,errorCode:"required",description:"Age is required"})]});super(Object.assign(s,l))}}class h extends A{constructor(l={}){const s=new A({controlName:"personality",fieldType:W.select,label:"Choose personality",placeholder:"personality",autoComplete:"off",defaultValue:"inspire",options:[{text:"Honest",value:"honest"},{text:"Lover",value:"lover"},{text:"Leader",value:"leader"},{text:"Elegant",value:"elegant"},{text:"Hard worker",value:"hard worker"},{text:"Helper",value:"helper"},{text:"Inspire",value:"inspire"}],validators:[new t({validator:a.kI.required,errorCode:"required",description:"personality is required"})]});super(Object.assign(s,l))}}class p extends A{constructor(l={}){const s=new A({controlName:"skills",label:"Enter skills",placeholder:"skills",validators:[new t({validator:a.kI.required,errorCode:"required",description:"Name is required"})]});super(Object.assign(s,l))}}class m extends A{constructor(l={}){const s=new A({controlName:"date",label:"Date of creation",placeholder:"date",autoComplete:"off",validators:[new t({validator:a.kI.required,errorCode:"required",description:"Name is required"})]});super(Object.assign(s,l))}}class C extends A{constructor(l={}){const s=new A({controlName:"avatar",label:"Select avatar",placeholder:"avatar",type:"file",validators:[new t({validator:a.kI.required,errorCode:"required",description:"Avatar is required"})]});super(Object.assign(s,l))}}var g=f(8254),y=f(6214),L=f(7871),N=f(294);let F=(()=>{class d{constructor(){}date(){return new Date}toUTC(){const s=this.date();return new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds()))}}return d.\u0275fac=function(s){return new(s||d)},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:N.I}),d})();var Y=f(4463),U=f(9344),G=f(8583);const nt=["submit"];function ht(d,l){if(1&d&&(e.TgZ(0,"form",1,2),e.Hsn(2),e._UZ(3,"button",3,4),e.qZA()),2&d){const s=e.oxw();e.Q6J("formGroup",s.formGroup)}}const T=["*"];let S=(()=>{class d{constructor(s){this.formBuilder=s,this._fieldModel=new A({controlName:null}),this.onPrefix=new e.vpe,this.$unSubscribe=new H.xQ}set noFieldConfig(s){this._fieldModel=s}writeValue(s){this.formGroup.controls[this.controlName].setValue(s,{emitEvent:!1})}registerOnChange(s){this.onChange=s}registerOnTouched(s){}setDisabledState(s){}emitValue(){this.onChange&&this.onChange(this.formGroup.controls[this.controlName].value)}ngOnChanges(s){}ngOnInit(){this.formGroup=this.formBuilder.group({[this.controlName]:new a.NI(null,this.validators.map(s=>s.validator).filter(s=>s))}),this.readOnly?this.formGroup.disable():this.formGroup.enable(),this.formControl.statusChanges.pipe((0,X.R)(this.$unSubscribe)).subscribe(s=>{"INVALID"===s&&this.checkCustomErrors(this.control)})}ngAfterViewInit(){this.submitted.pipe((0,X.R)(this.$unSubscribe)).subscribe(s=>{s&&this.submit.nativeElement.click()})}ngOnDestroy(){this.$unSubscribe.next(),this.$unSubscribe.complete()}handlePrefix(s){this.onPrefix.emit(!0)}get control(){return this.formGroup.get(this.controlName)}get fieldModel(){return this._fieldModel}get formControl(){return this.fieldModel.formControl}get autoComplete(){return this.fieldModel.autoComplete}get submitted(){return this.fieldModel.submit.status}get errorStateMatcher(){return this.fieldModel.errorStateMatcher}get validators(){return this.fieldModel.validators}get options(){return this.fieldModel.options}get controlType(){return this.fieldModel.controlType}get controlName(){return this.fieldModel.controlName}get useTranslation(){return this.fieldModel.useTranslation}get icon(){return this.fieldModel.icon}get label(){return this.fieldModel.label}get placeholder(){return this.fieldModel.placeholder}get hint(){return this.fieldModel.hint}get appearance(){return this.fieldModel.appearance}get type(){return this.fieldModel.type}get none(){return this.fieldModel.none}get multiple(){return this.fieldModel.multiple}get prefix(){return this.fieldModel.prefix}get dropDownInPrefix(){return this.fieldModel.dropDownInPrefix}get readOnly(){return this.fieldModel.readOnly}get color(){return this.fieldModel.color}get hidden(){return this.fieldModel.hidden}get disabled(){return this.fieldModel.disabled}errors(s){const v=[];if(s.invalid)for(const k of this.validators)if(s.hasError(k.errorCode)){v.push(k);break}return v}checkCustomErrors(s){this.formControl.errors&&Object.entries(this.formControl.errors).map(([v,k])=>({name:v,value:k})).forEach(v=>{this.validators.filter(k=>!k.validator).forEach(k=>{k.errorCode===v.name&&s.setErrors({[v.name]:!0})})})}}return d.\u0275fac=function(s){return new(s||d)(e.Y36(a.qu))},d.\u0275cmp=e.Xpm({type:d,selectors:[["formify-field"]],viewQuery:function(s,v){if(1&s&&e.Gf(nt,5),2&s){let k;e.iGM(k=e.CRH())&&(v.submit=k.first)}},inputs:{noFieldConfig:["fieldModel","noFieldConfig"]},outputs:{onPrefix:"onPrefix"},features:[e.TTD],ngContentSelectors:T,decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["form","ngForm"],["hidden",""],["submit",""]],template:function(s,v){1&s&&(e.F$t(),e.YNc(0,ht,5,1,"form",0)),2&s&&e.Q6J("ngIf",v.fieldModel&&!v.hidden)},directives:[G.O5,a._Y,a.JL,a.sg],styles:[""]}),d})();var r=f(8295),u=f(9983),b=f(6627),x=f(9790);function M(d,l){if(1&d){const s=e.EpF();e.TgZ(0,"mat-icon",12),e.NdJ("click",function(k){return e.CHM(s),e.oxw(3).handlePrefix(k)}),e._uU(1,"arrow_drop_down"),e.qZA()}}function tt(d,l){if(1&d){const s=e.EpF();e.TgZ(0,"span",10),e.NdJ("click",function(k){return e.CHM(s),e.oxw(2).handlePrefix(k)}),e._uU(1),e.YNc(2,M,2,0,"mat-icon",11),e._uU(3," \xa0\xa0 "),e.qZA()}if(2&d){const s=e.oxw(2);e.xp6(1),e.hij(" ",s.prefix," "),e.xp6(1),e.Q6J("ngIf",s.dropDownInPrefix)}}const et=function(d){return{"error-icon":d}};function st(d,l){if(1&d&&(e.TgZ(0,"mat-icon",13),e.ALo(1,"async"),e._uU(2),e.qZA()),2&d){const s=e.oxw(2);e.Q6J("ngClass",e.VKq(4,et,e.lcZ(1,2,s.control.invalid&&s.submitted))),e.xp6(2),e.Oqu(s.icon)}}function rt(d,l){if(1&d&&(e.TgZ(0,"mat-hint"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&d){const s=e.oxw(2);e.xp6(1),e.Oqu(s.useTranslation?e.lcZ(2,1,s.hint):s.hint)}}function w(d,l){if(1&d&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&d){const s=l.$implicit,v=e.oxw(3);e.xp6(1),e.hij(" ",v.useTranslation?e.xi3(2,1,s.translationCode,s.parameters):s.description," ")}}function V(d,l){if(1&d&&(e.TgZ(0,"mat-error"),e.YNc(1,w,3,4,"span",14),e.qZA()),2&d){const s=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",s.errors(s.control))}}function _(d,l){if(1&d){const s=e.EpF();e.TgZ(0,"form",1,2),e.TgZ(2,"mat-form-field",3),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,tt,4,2,"span",4),e.TgZ(7,"label"),e.TgZ(8,"input",5),e.NdJ("input",function(){return e.CHM(s),e.oxw().emitValue()}),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.YNc(10,st,3,6,"mat-icon",6),e.YNc(11,rt,3,3,"mat-hint",7),e.YNc(12,V,2,1,"mat-error",7),e.ALo(13,"async"),e.qZA(),e._UZ(14,"button",8,9),e.qZA()}if(2&d){const s=e.oxw();e.Q6J("formGroup",s.formGroup)("autocomplete",s.autoComplete),e.xp6(2),e.Q6J("appearance",s.appearance),e.xp6(2),e.Oqu(s.useTranslation?e.lcZ(5,11,s.label):s.label),e.xp6(2),e.Q6J("ngIf",s.prefix),e.xp6(2),e.Q6J("formControlName",s.controlName)("errorStateMatcher",s.errorStateMatcher)("placeholder",s.useTranslation?e.lcZ(9,13,s.placeholder):s.placeholder),e.xp6(2),e.Q6J("ngIf",s.icon),e.xp6(1),e.Q6J("ngIf",s.hint),e.xp6(1),e.Q6J("ngIf",e.lcZ(13,15,s.control.invalid&&s.submitted))}}let O=(()=>{class d extends S{constructor(s){super(s),this.formBuilder=s}ngOnChanges(s){super.ngOnChanges(s)}ngOnInit(){super.ngOnInit()}}return d.\u0275fac=function(s){return new(s||d)(e.Y36(a.qu))},d.\u0275cmp=e.Xpm({type:d,selectors:[["formify-input"]],features:[e._Bn([{provide:a.JU,useExisting:(0,e.Gpc)(()=>d),multi:!0}]),e.qOj,e.TTD],decls:1,vars:1,consts:[[3,"formGroup","autocomplete",4,"ngIf"],[3,"formGroup","autocomplete"],["form","ngForm"],[1,"full-width",3,"appearance"],["matPrefix","",3,"click",4,"ngIf"],["matInput","",3,"formControlName","errorStateMatcher","placeholder","input"],["matSuffix","",3,"ngClass",4,"ngIf"],[4,"ngIf"],["hidden",""],["submit",""],["matPrefix","",3,"click"],["class","dropDownIconInPrefix",3,"click",4,"ngIf"],[1,"dropDownIconInPrefix",3,"click"],["matSuffix","",3,"ngClass"],[4,"ngFor","ngForOf"]],template:function(s,v){1&s&&e.YNc(0,_,16,17,"form",0),2&s&&e.Q6J("ngIf",v.fieldModel&&!v.hidden)},directives:[G.O5,a._Y,a.JL,a.sg,r.KE,r.hX,u.Nt,a.Fj,a.JJ,a.u,r.qo,b.Hw,r.R9,G.mk,r.bx,r.TO,G.sg],pipes:[x.X$,G.Ov],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.error-icon[_ngcontent-%COMP%]{color:red}.dropDownIconInPrefix[_ngcontent-%COMP%]{position:relative;top:6px}"]}),d})();var R=f(7441),it=f(2458);function at(d,l){if(1&d){const s=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(k){return e.CHM(s),e.oxw(3).handlePrefix(k)}),e._uU(1,"arrow_drop_down"),e.qZA()}}function lt(d,l){if(1&d){const s=e.EpF();e.TgZ(0,"span",11),e.NdJ("click",function(k){return e.CHM(s),e.oxw(2).handlePrefix(k)}),e._uU(1),e.YNc(2,at,2,0,"mat-icon",12),e._uU(3," &nbsp "),e.qZA()}if(2&d){const s=e.oxw(2);e.xp6(1),e.hij(" ",s.prefix," "),e.xp6(1),e.Q6J("ngIf",s.dropDownInPrefix)}}function gt(d,l){1&d&&(e.TgZ(0,"mat-option"),e._uU(1,"None"),e.qZA())}function pt(d,l){if(1&d&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&d){const s=l.$implicit;e.Q6J("value",s.value),e.xp6(1),e.hij(" ",s.text," ")}}const ft=function(d){return{"error-icon":d}};function mt(d,l){if(1&d&&(e.TgZ(0,"mat-icon",15),e.ALo(1,"async"),e._uU(2),e.qZA()),2&d){const s=e.oxw(2);e.Q6J("ngClass",e.VKq(4,ft,e.lcZ(1,2,s.control.invalid&&s.submitted))),e.xp6(2),e.Oqu(s.icon)}}function vt(d,l){if(1&d&&(e.TgZ(0,"mat-hint"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&d){const s=e.oxw(2);e.xp6(1),e.Oqu(s.useTranslation?e.lcZ(2,1,s.hint):s.hint)}}function Ct(d,l){if(1&d&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&d){const s=l.$implicit,v=e.oxw(3);e.xp6(1),e.hij(" ",v.useTranslation?e.xi3(2,1,s.translationCode,s.parameters):s.description," ")}}function _t(d,l){if(1&d&&(e.TgZ(0,"mat-error"),e.YNc(1,Ct,3,4,"span",16),e.qZA()),2&d){const s=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",s.errors(s.control))}}function Tt(d,l){if(1&d){const s=e.EpF();e.TgZ(0,"form",1,2),e.TgZ(2,"mat-form-field",3),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,lt,4,2,"span",4),e.TgZ(7,"mat-select",5),e.NdJ("selectionChange",function(){return e.CHM(s),e.oxw().emitValue()}),e.YNc(8,gt,2,0,"mat-option",6),e.YNc(9,pt,2,2,"mat-option",7),e.qZA(),e.YNc(10,mt,3,6,"mat-icon",8),e.YNc(11,vt,3,3,"mat-hint",6),e.YNc(12,_t,2,1,"mat-error",6),e.ALo(13,"async"),e.qZA(),e._UZ(14,"button",9,10),e.qZA()}if(2&d){const s=e.oxw();e.Q6J("formGroup",s.formGroup)("autocomplete",s.autoComplete),e.xp6(2),e.Q6J("appearance",s.appearance),e.xp6(2),e.Oqu(s.useTranslation?e.lcZ(5,13,s.label):s.label),e.xp6(2),e.Q6J("ngIf",s.prefix),e.xp6(1),e.s9C("multiple",s.multiple),e.Q6J("formControlName",s.controlName)("errorStateMatcher",s.errorStateMatcher),e.xp6(1),e.Q6J("ngIf",s.none),e.xp6(1),e.Q6J("ngForOf",s.options),e.xp6(1),e.Q6J("ngIf",s.icon),e.xp6(1),e.Q6J("ngIf",s.hint),e.xp6(1),e.Q6J("ngIf",e.lcZ(13,15,s.control.invalid&&s.submitted))}}let yt=(()=>{class d extends S{constructor(s){super(s),this.formBuilder=s}ngOnChanges(s){super.ngOnChanges(s)}ngOnInit(){super.ngOnInit()}}return d.\u0275fac=function(s){return new(s||d)(e.Y36(a.qu))},d.\u0275cmp=e.Xpm({type:d,selectors:[["formify-select"]],features:[e._Bn([{provide:a.JU,useExisting:(0,e.Gpc)(()=>d),multi:!0}]),e.qOj,e.TTD],decls:1,vars:1,consts:[[3,"formGroup","autocomplete",4,"ngIf"],[3,"formGroup","autocomplete"],["form","ngForm"],[1,"full-width",3,"appearance"],["matPrefix","",3,"click",4,"ngIf"],[3,"formControlName","multiple","errorStateMatcher","selectionChange"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",3,"ngClass",4,"ngIf"],["hidden",""],["submit",""],["matPrefix","",3,"click"],["class","dropDownIconInPrefix",3,"click",4,"ngIf"],[1,"dropDownIconInPrefix",3,"click"],[3,"value"],["matSuffix","",3,"ngClass"],[4,"ngFor","ngForOf"]],template:function(s,v){1&s&&e.YNc(0,Tt,16,17,"form",0),2&s&&e.Q6J("ngIf",v.fieldModel&&!v.hidden)},directives:[G.O5,a._Y,a.JL,a.sg,r.KE,r.hX,R.gD,a.JJ,a.u,G.sg,r.qo,b.Hw,it.ey,r.R9,G.mk,r.bx,r.TO],pipes:[x.X$,G.Ov],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.error-icon[_ngcontent-%COMP%]{color:red}.dropDownIconInPrefix[_ngcontent-%COMP%]{position:relative;top:6px}"]}),d})();function bt(d,l){if(1&d){const s=e.EpF();e.TgZ(0,"mat-icon",12),e.NdJ("click",function(k){return e.CHM(s),e.oxw(3).handlePrefix(k)}),e._uU(1,"arrow_drop_down"),e.qZA()}}function wt(d,l){if(1&d){const s=e.EpF();e.TgZ(0,"span",10),e.NdJ("click",function(k){return e.CHM(s),e.oxw(2).handlePrefix(k)}),e._uU(1),e.YNc(2,bt,2,0,"mat-icon",11),e._uU(3," &nbsp "),e.qZA()}if(2&d){const s=e.oxw(2);e.xp6(1),e.hij(" ",s.prefix," "),e.xp6(1),e.Q6J("ngIf",s.dropDownInPrefix)}}const xt=function(d){return{"error-icon":d}};function Ot(d,l){if(1&d&&(e.TgZ(0,"mat-icon",13),e.ALo(1,"async"),e._uU(2),e.qZA()),2&d){const s=e.oxw(2);e.Q6J("ngClass",e.VKq(4,xt,e.lcZ(1,2,s.control.invalid&&s.submitted))),e.xp6(2),e.Oqu(s.icon)}}function Mt(d,l){if(1&d&&(e.TgZ(0,"mat-hint"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&d){const s=e.oxw(2);e.xp6(1),e.Oqu(s.useTranslation?e.lcZ(2,1,s.hint):s.hint)}}function Dt(d,l){if(1&d&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&d){const s=l.$implicit,v=e.oxw(3);e.xp6(1),e.hij(" ",v.useTranslation?e.xi3(2,1,s.translationCode,s.parameters):s.description," ")}}function At(d,l){if(1&d&&(e.TgZ(0,"mat-error"),e.YNc(1,Dt,3,4,"span",14),e.qZA()),2&d){const s=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",s.errors(s.control))}}function Et(d,l){if(1&d){const s=e.EpF();e.TgZ(0,"form",1,2),e.TgZ(2,"mat-form-field",3),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,wt,4,2,"span",4),e.TgZ(7,"label"),e.TgZ(8,"textarea",5),e.NdJ("input",function(){return e.CHM(s),e.oxw().emitValue()}),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.YNc(10,Ot,3,6,"mat-icon",6),e.YNc(11,Mt,3,3,"mat-hint",7),e.YNc(12,At,2,1,"mat-error",7),e.ALo(13,"async"),e.qZA(),e._UZ(14,"button",8,9),e.qZA()}if(2&d){const s=e.oxw();e.Q6J("formGroup",s.formGroup)("autocomplete",s.autoComplete),e.xp6(2),e.Q6J("appearance",s.appearance),e.xp6(2),e.Oqu(s.useTranslation?e.lcZ(5,12,s.label):s.label),e.xp6(2),e.Q6J("ngIf",s.prefix),e.xp6(2),e.Q6J("formControlName",s.controlName)("errorStateMatcher",s.errorStateMatcher)("type",s.type)("placeholder",s.useTranslation?e.lcZ(9,14,s.placeholder):s.placeholder),e.xp6(2),e.Q6J("ngIf",s.icon),e.xp6(1),e.Q6J("ngIf",s.hint),e.xp6(1),e.Q6J("ngIf",e.lcZ(13,16,s.control.invalid&&s.submitted))}}let It=(()=>{class d extends S{constructor(s){super(s),this.formBuilder=s}ngOnChanges(s){super.ngOnChanges(s)}ngOnInit(){super.ngOnInit()}}return d.\u0275fac=function(s){return new(s||d)(e.Y36(a.qu))},d.\u0275cmp=e.Xpm({type:d,selectors:[["formify-textarea"]],features:[e._Bn([{provide:a.JU,useExisting:(0,e.Gpc)(()=>d),multi:!0}]),e.qOj,e.TTD],decls:1,vars:1,consts:[[3,"formGroup","autocomplete",4,"ngIf"],[3,"formGroup","autocomplete"],["form","ngForm"],[1,"full-width",3,"appearance"],["matPrefix","",3,"click",4,"ngIf"],["matInput","",3,"formControlName","errorStateMatcher","type","placeholder","input"],["matSuffix","",3,"ngClass",4,"ngIf"],[4,"ngIf"],["hidden",""],["submit",""],["matPrefix","",3,"click"],["class","dropDownIconInPrefix",3,"click",4,"ngIf"],[1,"dropDownIconInPrefix",3,"click"],["matSuffix","",3,"ngClass"],[4,"ngFor","ngForOf"]],template:function(s,v){1&s&&e.YNc(0,Et,16,18,"form",0),2&s&&e.Q6J("ngIf",v.fieldModel&&!v.hidden)},directives:[G.O5,a._Y,a.JL,a.sg,r.KE,r.hX,u.Nt,a.Fj,a.JJ,a.u,r.qo,b.Hw,r.R9,G.mk,r.bx,r.TO,G.sg],pipes:[x.X$,G.Ov],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.error-icon[_ngcontent-%COMP%]{color:red}.dropDownIconInPrefix[_ngcontent-%COMP%]{position:relative;top:6px}"]}),d})();var St=f(904),Nt=f(1095),Lt=f(4885);function Pt(d,l){if(1&d&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&d){const s=e.oxw();e.xp6(1),e.hij(" ",s.submit.text,"")}}function Zt(d,l){1&d&&(e.TgZ(0,"mat-icon",4),e._UZ(1,"mat-spinner",5),e.qZA()),2&d&&(e.xp6(1),e.Q6J("diameter",30))}let Ft=(()=>{class d{constructor(){this.submit=new P,this.disabled=!1,this.onSubmit=new e.vpe}ngOnInit(){}onHandleSubmit(){this.onSubmit.emit(!0),this.submit.status.next(!0)}}return d.\u0275fac=function(s){return new(s||d)},d.\u0275cmp=e.Xpm({type:d,selectors:[["formify-submit"]],inputs:{submit:"submit",disabled:"disabled"},outputs:{onSubmit:"onSubmit"},decls:5,vars:4,consts:[[1,"submit-content"],["mat-raised-button","",1,"submit",3,"disabled","color","click"],[4,"ngIf","ngIfElse"],["loading_spinner_login",""],[1,"icon_button_login"],[1,"loading","center",3,"diameter"]],template:function(s,v){if(1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return v.onHandleSubmit()}),e.YNc(2,Pt,2,1,"span",2),e.YNc(3,Zt,2,1,"ng-template",null,3,e.W1O),e.qZA(),e.qZA()),2&s){const k=e.MAs(4);e.xp6(1),e.s9C("color",v.submit.color),e.Q6J("disabled",v.submit.disabled),e.xp6(1),e.Q6J("ngIf",!v.submit.loading)("ngIfElse",k)}},directives:[Nt.lW,G.O5,b.Hw,Lt.$g],styles:[".submit-content[_ngcontent-%COMP%]{padding-top:10px}.submit-content[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{width:100%}.submit-content[_ngcontent-%COMP%]   .icon_button_login[_ngcontent-%COMP%]{position:relative;top:-3px}"]}),d})();const kt=function(d){return{"loading-form":d}},Vt=function(d){return{"invalid-tagify":d}};function Jt(d,l){if(1&d){const s=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form",2,3),e.NdJ("ngSubmit",function(){return e.CHM(s),e.oxw().onSubmit()}),e.TgZ(3,"div",4),e._UZ(4,"formify-input",5),e.TgZ(5,"app-avatar",6),e.NdJ("onPath",function(k){return e.CHM(s),e.oxw().onAvatarPathSelected(k)}),e.qZA(),e.qZA(),e._UZ(6,"formify-select",7),e._UZ(7,"formify-textarea",8),e.TgZ(8,"div",9),e._UZ(9,"formify-input",10),e._UZ(10,"formify-select",11),e.qZA(),e.TgZ(11,"div",9),e._UZ(12,"formify-input",12),e._UZ(13,"tagify",13),e.qZA(),e._UZ(14,"formify-submit",14),e.qZA(),e.qZA()}if(2&d){const s=e.MAs(2),v=e.oxw();e.xp6(1),e.Q6J("formGroup",v.formify.formGroup)("ngClass",e.VKq(16,kt,v.formify.submit.loading)),e.xp6(3),e.Q6J("fieldModel",v.formify.field("name")),e.xp6(1),e.Q6J("src",v.isEdit()?v.character.avatar:null)("direction",v.AvatarDirection.upload)("required",v.formify.formGroup.get("avatar").invalid&&s.submitted),e.xp6(1),e.Q6J("fieldModel",v.formify.field("role")),e.xp6(1),e.Q6J("fieldModel",v.formify.field("description")),e.xp6(2),e.Q6J("fieldModel",v.formify.field("age")),e.xp6(1),e.Q6J("fieldModel",v.formify.field("personality")),e.xp6(2),e.Q6J("fieldModel",v.formify.field("creator")),e.xp6(1),e.Q6J("ngClass",e.VKq(18,Vt,v.formify.formGroup.get("skills").invalid&&s.submitted))("settings",v.settings)("whitelist",v.whitelist$)("readonly",v.readonly),e.xp6(1),e.Q6J("submit",v.formify.submit)}}function Ut(d,l){1&d&&(e.TgZ(0,"div"),e._uU(1," View "),e.qZA())}var ct=(()=>{return(d=ct||(ct={})).edit="edit",d.add="add",d.view="view",ct;var d})();let Rt=(()=>{class d{constructor(s,v,k,dt){this.cdr=s,this.date=v,this.store=k,this.toastr=dt,this.settings={placeholder:"Enter skills...",addTagOnBlur:!0,blacklist:["fucking","shit"],delimiters:",| ",callbacks:{click:ut=>{}}},this.whitelist$=new D.X(["hello","world"]),this.readonly=!1,this.direction=ct.add,this.character=new E.f,this.onUpdated=new e.vpe,this.onInserted=new e.vpe,this.AvatarDirection=L.Y,this.characters=[],this.formify=new J({controls:[new i({}),new n({}),new o({}),new c({}),new h({}),new p({}),new m({}),new i({controlName:"creator",placeholder:"Name of creator",label:"Enter name of creator"}),new C({})],submit:{text:"Save"}}),this.formify.formGroup.patchValue({date:this.date.toUTC()}),this.store.select(g.kF).subscribe(ut=>{ut&&(this.characters=ut)})}ngOnInit(){this.isEdit()&&this.formify.formGroup.patchValue(this.character)}onAvatarPathSelected(s){this.formify.formGroup.patchValue({avatar:s})}onSubmit(){this.formify.loading(!0),setTimeout(()=>{this.formify.loading(!1),this.formify.formGroup.valid&&(this.character=Object.assign(Object.assign({},this.character),this.formify.formGroup.value),this.isAdd()&&(this.character.id=(new Date).valueOf()),this.isAdd()&&this.onAddCharacter(this.character),this.isEdit()&&this.onEditCharacter(this.character))},1e3)}isEdit(){return this.direction===ct.edit}isAdd(){return this.direction===ct.add}isView(){return this.direction===ct.view}onEditCharacter(s){this.characters.find(v=>v.id===s.id)?(this.store.dispatch((0,y.Ag)({character:s})),this.toastr.success(s.name+" updated successfully","",{closeButton:!0,timeOut:3e3,positionClass:"toast-bottom-right"}),this.onUpdated.emit(!0)):this.toastr.warning(s.name+" was not founded to edit","",{closeButton:!0,timeOut:3e3,positionClass:"toast-bottom-right"})}onAddCharacter(s){this.characters.find(v=>v.name===s.name)?this.toastr.warning(s.name+" already exist","",{closeButton:!0,timeOut:3e3,positionClass:"toast-bottom-right"}):(this.store.dispatch((0,y.y8)({character:s})),this.toastr.success(s.name+" created successfully","",{closeButton:!0,timeOut:3e3,positionClass:"toast-bottom-right"}),this.onInserted.emit(!0))}}return d.\u0275fac=function(s){return new(s||d)(e.Y36(e.sBO),e.Y36(F),e.Y36(Y.yh),e.Y36(U._W))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-viewtify-character"]],inputs:{settings:"settings",whitelist$:["whitelist","whitelist$"],readonly:"readonly",direction:"direction",character:"character"},outputs:{onUpdated:"onUpdated",onInserted:"onInserted"},decls:3,vars:2,consts:[[1,"add-character-content"],[4,"ngIf"],[3,"formGroup","ngClass","ngSubmit"],["form","ngForm"],[1,"avatar-content"],["formControlName","name",3,"fieldModel"],[3,"src","direction","required","onPath"],["formControlName","role",3,"fieldModel"],["formControlName","description",3,"fieldModel"],[1,"flex-content"],["formControlName","age",3,"fieldModel"],["formControlName","personality",3,"fieldModel"],["formControlName","creator",3,"fieldModel"],["name","skills","formControlName","skills","inputClass","form-control",3,"ngClass","settings","whitelist","readonly"],[3,"submit"]],template:function(s,v){1&s&&(e.TgZ(0,"div",0),e.YNc(1,Jt,15,20,"div",1),e.YNc(2,Ut,2,0,"div",1),e.qZA()),2&s&&(e.xp6(1),e.Q6J("ngIf",v.isAdd()||v.isEdit()),e.xp6(1),e.Q6J("ngIf",v.isView()))},directives:[G.O5,a._Y,a.JL,a.sg,G.mk,O,a.JJ,a.u,L.A,yt,It,St.iJ,Ft],styles:[".add-character-content[_ngcontent-%COMP%]{width:480px}.add-character-content[_ngcontent-%COMP%]   .avatar-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.add-character-content[_ngcontent-%COMP%]   .avatar-content[_ngcontent-%COMP%]   formify-input[_ngcontent-%COMP%]{width:calc(100% - 130px)}.add-character-content[_ngcontent-%COMP%]   .flex-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.add-character-content[_ngcontent-%COMP%]   .flex-content[_ngcontent-%COMP%]   formify-input[_ngcontent-%COMP%], .add-character-content[_ngcontent-%COMP%]   .flex-content[_ngcontent-%COMP%]   formify-select[_ngcontent-%COMP%], .add-character-content[_ngcontent-%COMP%]   .flex-content[_ngcontent-%COMP%]   tagify[_ngcontent-%COMP%]{width:calc(50% - 10px)}.add-character-content[_ngcontent-%COMP%]     .tagify{margin-bottom:10px}.full-width[_ngcontent-%COMP%]{width:100%}.error-icon[_ngcontent-%COMP%]{color:red}.dropDownIconInPrefix[_ngcontent-%COMP%]{position:relative;top:6px}.tags-content[_ngcontent-%COMP%]{padding:0 0 10px}  .mat-form-field-underline{background-color:#eee!important}  .organization-hashtags-content .tagify__input{--placeholder-color-focus: #673ab7}  .tagify{--tags-border-color:empty;--tags-focus-border-color:#673ab7;border-bottom:1px solid #eee}  .tagify__tag>div{border-radius:10px}  .invalid-tagify .tagify{border-bottom:1px solid red}  .invalid-tagify .tagify .tagify__input:before{color:red}@media screen and (max-width: 576px){.add-character-content[_ngcontent-%COMP%]{width:auto}}"]}),d})()},9750:(ot,K,f)=>{"use strict";f.d(K,{V:()=>W});var e=f(8583),D=f(3679),E=f(9790),a=f(1841);class j{constructor(H,X="/assets/i18n/",Z=".json"){this.http=H,this.prefix=X,this.suffix=Z}getTranslation(H){return this.http.get(`${this.prefix}${H}${this.suffix}`)}}var z=f(3261),q=f(904),P=f(7716);function $(A){return new j(A,"assets/i18n/",".json")}let W=(()=>{class A{}return A.\u0275fac=function(X){return new(X||A)},A.\u0275mod=P.oAB({type:A}),A.\u0275inj=P.cJS({imports:[[e.ez,a.JF,z.q,D.UX,E.aw.forRoot({loader:{provide:E.Zw,useFactory:$,deps:[a.eN]}}),q.qT.forRoot()],D.UX]}),A})()},7871:(ot,K,f)=>{"use strict";f.d(K,{Y:()=>H,A:()=>X});var e=f(7716),D=f(8583),E=f(6627);const a=["avatar"],j=function(Z){return{"loaded-avatar":Z}};function z(Z,Q){if(1&Z){const I=e.EpF();e.TgZ(0,"span"),e.TgZ(1,"img",2),e.NdJ("load",function(){return e.CHM(I),e.oxw().loadedAvatar=!0}),e.qZA(),e.qZA()}if(2&Z){const I=e.oxw();e.xp6(1),e.Q6J("src",I.src,e.LSH)("ngClass",e.VKq(2,j,I.loadedAvatar))}}const q=function(Z){return{"avatar-icon-reqired":Z}};function P(Z,Q){if(1&Z&&(e.TgZ(0,"mat-icon",7),e._uU(1,"cloud_upload"),e.qZA()),2&Z){const I=e.oxw(2);e.Q6J("ngClass",e.VKq(1,q,I.required))}}function $(Z,Q){if(1&Z){const I=e.EpF();e.TgZ(0,"img",2),e.NdJ("load",function(){return e.CHM(I),e.oxw(2).loadedAvatar=!0}),e.qZA()}if(2&Z){const I=e.oxw(2);e.Q6J("src",I.src,e.LSH)("ngClass",e.VKq(2,j,I.loadedAvatar))}}function W(Z,Q){if(1&Z){const I=e.EpF();e.TgZ(0,"span"),e.YNc(1,P,2,3,"mat-icon",3),e.YNc(2,$,1,4,"img",4),e.TgZ(3,"input",5,6),e.NdJ("change",function(J){return e.CHM(I),e.oxw().handleFileInput(J)}),e.qZA(),e.qZA()}if(2&Z){const I=e.oxw();e.xp6(1),e.Q6J("ngIf",!I.src),e.xp6(1),e.Q6J("ngIf",I.src)}}const A=function(Z){return{"avatar-reqired":Z}};var H=(()=>{return(Z=H||(H={})).upload="upload",Z.preview="preview",H;var Z})();let X=(()=>{class Z{constructor(){this.src=null,this.required=!1,this.onPath=new e.vpe,this.direction=H.preview,this.loadedAvatar=!1}ngOnInit(){}isUpload(){return this.direction===H.upload}isPreview(){return this.direction===H.preview}handleFileInput(I){const B=I.target.files[0];let J=new FileReader;J.readAsDataURL(B),J.onload=t=>{this.src=t.target.result,this.onPath.emit(this.src)}}onClickAvatar(){this.isUpload()&&this.avatarElement.nativeElement.click()}}return Z.\u0275fac=function(I){return new(I||Z)},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["app-avatar"]],viewQuery:function(I,B){if(1&I&&e.Gf(a,5),2&I){let J;e.iGM(J=e.CRH())&&(B.avatarElement=J.first)}},inputs:{src:"src",required:"required",direction:"direction"},outputs:{onPath:"onPath"},decls:3,vars:5,consts:[[1,"avatar",3,"ngClass","click"],[4,"ngIf"],[3,"src","ngClass","load"],[3,"ngClass",4,"ngIf"],[3,"src","ngClass","load",4,"ngIf"],["hidden","","type","file","id","file",3,"change"],["avatar",""],[3,"ngClass"]],template:function(I,B){1&I&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return B.onClickAvatar()}),e.YNc(1,z,2,4,"span",1),e.YNc(2,W,5,2,"span",1),e.qZA()),2&I&&(e.Q6J("ngClass",e.VKq(3,A,B.required)),e.xp6(1),e.Q6J("ngIf",B.isPreview()),e.xp6(1),e.Q6J("ngIf",B.isUpload()))},directives:[D.mk,D.O5,E.Hw],styles:[".avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:100%;background-color:#eee;border:1px solid #eee;position:relative;cursor:pointer}.avatar[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:100%;border:1px solid #eee;object-fit:cover;object-position:center;opacity:0}.avatar[_ngcontent-%COMP%]   .loaded-avatar[_ngcontent-%COMP%]{transition:.3s;opacity:1}.avatar-reqired[_ngcontent-%COMP%]{border:1px solid red}.avatar-icon-reqired[_ngcontent-%COMP%]{color:red}"]}),Z})()},8205:(ot,K,f)=>{"use strict";f.d(K,{y:()=>a});var e=f(8254),D=f(7716),E=f(4463);let a=(()=>{class j{constructor(q){this.store=q,this.label="Characters",this.characters=[],this.store.select(e.kF).subscribe(P=>{P&&(this.characters=P)})}ngOnInit(){}}return j.\u0275fac=function(q){return new(q||j)(D.Y36(E.yh))},j.\u0275cmp=D.Xpm({type:j,selectors:[["app-direction"]],inputs:{label:"label"},decls:6,vars:2,consts:[[1,"direction"],[1,"title"],[1,"total"]],template:function(q,P){1&q&&(D.TgZ(0,"div",0),D.TgZ(1,"span",1),D.TgZ(2,"strong"),D._uU(3),D.qZA(),D.qZA(),D.TgZ(4,"span",2),D._uU(5),D.qZA(),D.qZA()),2&q&&(D.xp6(3),D.Oqu(P.label),D.xp6(2),D.hij("Total ",P.characters.length,""))},styles:[".direction[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:40px;border-bottom:1px solid #eee;align-items:center;margin-bottom:20px}.direction[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px}"]}),j})()},6150:(ot,K,f)=>{"use strict";f.d(K,{f:()=>e});class e{constructor(E){this.character=E,this.id=null,this.name=null,this.role=null,this.description=null,this.age=null,this.personality=null,this.skills=null,this.createdAt=null,this.creator=null,this.avatar=null,Object.assign(this,E)}}},8254:(ot,K,f)=>{"use strict";f.d(K,{kF:()=>E});const E=(0,f(4463).P1)(j=>j.characters,j=>j.characters)}}]);